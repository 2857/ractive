<!doctype html>
<html lang='en-GB'>
<head>
	<meta charset='utf-8'>

	<title>refactor | Ractive.js sandbox</title>

	<!-- CSS -->
	<link rel='stylesheet' href='../_sandbox.css'>

	<!--[if lte IE 8]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>

<body>
	<header>
		<a href='../'>&laquo;</a> <h1>refactor</h1>
	</header>

	<main>
		<p class='loading'>loading individual Ractive.js source files... please wait</p>
	</main>

	<footer>
		<a href='http://ractivejs.org'>Ractive.js</a>
		<a href='http://docs.ractivejs.org'>Docs</a>
		<a href='http://twitter.com/RactiveJS'>Get help on Twitter @RactiveJS</a>
	</footer>

	<script id='template' type='text/ractive'>
		<p>{{foo}}</p>
	</script>

	<script id='broken' type='text/ractive'>
		<!--{{#selected}}
			<p style='color: {{this}};'>{{this}}</p>
		{{/selected}}-->

		<p>selected: {{selected.join(',')}}</p>

		<select multiple value="{{selected}}">
			<option value="red">red</option>
			<option selected value="blue">blue</option>
			<option value="green">green</option>
		</select>
	</script>

	<!-- JS -->
	<script src='../require.js'></script>
	<script>
		var ractive, fixture, Widget, Subclass, people;

		fixture = document.querySelector( 'main' ); // so we can copy and paste into test suite more easily

		// Configure RequireJS to load Ractive from the .amd/ folder
		require.config({ baseUrl: '../../.amd/' });

		require([ 'ractive' ], function ( Ractive ) {
			window.Ractive = Ractive;

			ractive = new Ractive({
				el: fixture,
				template: function(d, o, t){
					return d.condition ? '{{foo}}' : '{{bar}}'
				},
				data: { foo: 'fizz', bar: 'bizz', condition: true }
			});

			//t.htmlEqual( fixture.innerHTML, 'fizz' );
			ractive.set('condition', false)
			ractive.reset(ractive.data).then( function () {
				console.log( 'resetted' );
			});
			//t.htmlEqual( fixture.innerHTML, 'bizz' );
		});
	</script>
</body>
</html>
