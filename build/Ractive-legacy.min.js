var Ractive,utils,types,namespaces,tokens,expr,stubs;utils={},types={},namespaces={},tokens={},expr={},stubs={};var TEXT=1,INTERPOLATOR=2,TRIPLE=3,SECTION=4,INVERTED=5,CLOSING=6,ELEMENT=7,PARTIAL=8,COMMENT=9,DELIMCHANGE=10,MUSTACHE=11,TAG=12,ATTR_VALUE_TOKEN=13;(function(t){"use strict";Date.now||(Date.now=function(){return+new Date}),t.createElementNS||(t.createElementNS=function(e,n){if(null!==e&&"http://www.w3.org/1999/xhtml"!==e)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml";return t.createElement(n)}),Element.prototype.contains||(Element.prototype.contains=function(t){for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),window.addEventListener||function(t,e,n,i,r,s,o){t[i]=e[i]=n[i]=function(t,e){var n=this;o.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,o[0][3])},t[r]=e[r]=n[r]=function(t,e){var n,i;for(n=0,i;i=o[n];++n)if(i[0]===this&&i[1]===t&&i[2]===e)return this.detachEvent("on"+t,o.splice(n,1)[0][3])},t[s]=e[s]=n[s]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&(r[n]=t.call(e,this[n],n,this));return r}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(r[r.length]=this[n]);return r})})(document),function(t){"use strict";var e,n,i,r,s,o,a;n={},i={},r={},s={},o={},a={};var h=1,p=2,c=3,u=4,l=5,d=6,f=7,m=8,g=9,v=10,y=11,w=12;e=function(t){var i,r,s,o;if(t)for(r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);i={preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,data:{}};for(r in i)i.hasOwnProperty(r)&&void 0===this[r]&&(this[r]=i[r]);if(void 0!==this.el&&(this.el=n.getEl(this.el)),this._subs={},this._cache={},this._cacheMap={},this.nodes={},this._observers={},this._pendingResolution=[],this._defAttrs=[],this._proxies={},this._bound=[],this.bindings)if(n.isArray(this.bindings))for(o=0;this.bindings.length>o;o+=1)this.bind(this.bindings[o]);else this.bind(this.bindings);if(this.partials)for(r in this.partials)if(this.partials.hasOwnProperty(r)){if(s=this.partials[r],"string"==typeof s){if(!e.compile)throw Error('Missing Ractive.compile - cannot compile partial "'+r+'". Either precompile or use the version that includes the compiler');s=e.compile(s,this)}1===s.length&&"string"==typeof s[0]&&(s=s[0]),this.partials[r]=s}if("string"==typeof this.template){if(!e.compile)throw Error("Missing Ractive.compile - cannot compile template. Either precompile or use the version that includes the compiler");this.template=e.compile(this.template,this)}this.template&&1===this.template.length&&"string"==typeof this.template[0]&&(this.template=this.template[0]),this.el&&this.render({el:this.el,append:this.append})};var x=e.prototype;e.adaptors={},e.eventDefinitions={},x.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},x.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)},x.get=function(t){var e,i,r,s,o,a;if(n.isArray(t))e=t.slice(),i=e.join(".");else{if(this._cache.hasOwnProperty(t))return this._cache[t];e=n.splitKeypath(t),i=e.join(".")}return this._cache.hasOwnProperty(i)?this._cache[i]:(r=e.pop(),o=e.length?this.get(e):this.data,"object"==typeof o&&o.hasOwnProperty(r)?(a=o[r],s=e.join("."),this._cacheMap[s]||(this._cacheMap[s]=[]),this._cacheMap[s].push(i),"function"==typeof a?a=a():this.modifyArrays&&(!n.isArray(a)||a.ractive&&a._ractive.setting||n.addKeypath(a,i,this)),this._cache[i]=a,a):void 0)},x.link=function(t){var e=this;return function(n){e.set(t,n)}},x.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},x.on=function(t,e){var n,i,r=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&(n[n.length]=this.on(i,t[i]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){r.off(t,e)}}},x.render=function(t){var e=t.el?n.getEl(t.el):this.el;if(!e)throw Error("You must specify a DOM element to render to");t.append||(e.innerHTML=""),t.callback&&(this.callback=t.callback),this.rendered=new n.DomFragment({descriptor:this.template,root:this,owner:this,parentNode:e}),e.appendChild(this.rendered.docFrag)},function(t){var e,i;e=function(t,e,i){var r,s,o,a,h,p;for(r=n.isArray(e)?e.slice():n.splitKeypath(e),a=r.join("."),n.clearCache(t,a),o=t.data;r.length>1;)s=r.shift(),o[s]||(o[s]=/^\s*[0-9]+\s*$/.test(r[0])?[]:{}),o=o[s];for(s=r[0],o[s]=i,t.setting||(t.setting=!0,t.fire("set",a,i),t.fire("set:"+a,i),t.setting=!1),n.notifyObservers(t,a),h=t._pendingResolution.length;h--;)p=t._pendingResolution.splice(h,1)[0],n.resolveRef(t,p)||(t._pendingResolution[t._pendingResolution.length]=p)},i=function(t,n){var i;for(i in n)n.hasOwnProperty(i)&&e(t,i,n[i])},t.set=function(t,r){for(n.isObject(t)?i(this,t):e(this,t,r);this._defAttrs.length;)this._defAttrs.pop().update().deferred=!1}}(x),x.teardown=function(){var t;this.rendered.teardown();for(t in this._cacheMap)this._cacheMap.hasOwnProperty(t)&&n.clearCache(this,t);for(t in this._cache)this._cache.hasOwnProperty(t)&&n.clearCache(this,t);for(;this._bound.length;)this.unbind(this._bound.pop())},x.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},x.update=function(t){return n.clearCache(this,t||""),n.notifyObservers(this,t),this.fire("update:"+t),this.fire("update",t),this},n.cancelKeypathResolution=function(t,e){var n=t._pendingResolution.indexOf(e);-1!==n&&t._pendingResolution.splice(n,1)},n.clearCache=function(t,e){var i,r=t._cacheMap[e];if(t.modifyArrays&&(i=t._cache[e],n.isArray(i)&&!i._ractive.setting&&n.removeKeypath(i,e,t)),delete t._cache[e],r)for(;r.length;)n.clearCache(t,r.pop())},n.getEl=function(t){var e,n;if("undefined"!=typeof window){if(n=window.document,!t)throw Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=n.getElementById(t),!e&&n.querySelector&&(e=n.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw Error("Could not find container element")}},n.notifyObservers=function(t,e){var n,i,r,s,o=t._observers[e]||[];for(n=0;o.length>n;n+=1)if(r=o[n])for(i=0;r.length>i;i+=1)s=r[i],s.update(t.get(s.keys))},n.observe=function(t,e){var i,r,s=[],o=e.descriptor.p||0;for(i=function(n){var i;i=t._observers[n]=t._observers[n]||[],i=i[o]=i[o]||[],i[i.length]=e,s[s.length]={keypath:n,priority:o,mustache:e}},r=n.splitKeypath(e.keypath);r.length;)i(r.join(".")),r.pop();return i(r[0]),s},n.registerMustache=function(t,e){var i,r;return e.parentFragment.indexRefs&&e.parentFragment.indexRefs.hasOwnProperty(e.descriptor.r)?(r=e.parentFragment.indexRefs[e.descriptor.r],e.update(r),void 0):(i=n.resolveRef(t,e),i||(t._pendingResolution[t._pendingResolution.length]=e),void 0)},n.resolveRef=function(t,e){var i,r,s,o,a,h,p,c;if(i=e.descriptor.r,r=e.contextStack,"."===i)c=r[r.length-1];else{for(s=n.splitKeypath(i),o=s.pop(),r=r.concat();r.length;)if(a=r.pop(),h=n.splitKeypath(a),p=t.get(h.concat(s)),"object"==typeof p&&p.hasOwnProperty(o)){c=a+"."+i;break}c||void 0===t.get(i)||(c=i)}return c?(e.keypath=c,e.keys=n.splitKeypath(e.keypath),e.observerRefs=n.observe(t,e),e.update(t.get(e.keypath)),!0):!1},n.unobserve=function(t,e){var n,i,r,s,o;if(n=t._observers[e.keypath],n&&(i=n[e.priority])){if(i.indexOf)r=i.indexOf(e.observer);else for(s=0,o=i.length;o>s;s+=1)if(i[s]===e.mustache){r=s;break}-1!==r&&(i.splice(r,1),0===i.length&&delete n[e.priority],0===n.length&&delete t._observers[e.keypath])}},n.unobserveAll=function(t,e){for(;e.length;)n.unobserve(t,e.shift())},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t},function(t){var e,n,i,r,s,o,a;e=Object.defineProperty?Object.defineProperty:function(t,e,n){t[e]=n.value},t.addKeypath=function(t,n,r){var s,o,a,h;t._ractive?(s=t._ractive.roots,o=t._ractive.keypathsByIndex,a=s.indexOf(r),-1===a&&(a=s.length,s[a]=r),o[a]||(o[a]=[]),h=o[a],-1===h.indexOf(n)&&(h[h.length]=n)):(e(t,"_ractive",{value:{roots:[r],keypathsByIndex:[[n]]},configurable:!0}),i(t))},t.removeKeypath=function(t,e,n){var i,s,o,a,h;if(!t._ractive)throw Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(i=t._ractive.roots,o=i.indexOf(n),-1===o)throw Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(s=t._ractive.keypathsByIndex,a=s[o],h=a.indexOf(e),-1===h)throw Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");a.splice(h,1),a.length||i.splice(o,1),i.length||r(t)},n=function(t){var e,n,i,r,s,o;for(e=t._ractive.roots,n=t._ractive.keypathsByIndex,s=e.length;s--;)for(i=e[s],r=n[s],o=r.length;o--;)i.set(r[o],t)},s=[],a=["pop","push","reverse","shift","sort","splice","unshift"],a.forEach(function(t){var i=function(){var e=Array.prototype[t].apply(this,arguments);return this._ractive.setting=!0,n(this),this._ractive.setting=!1,e};e(s,t,{value:i})}),o={},o.__proto__?(i=function(t){t.__proto__=s},r=function(t){delete t._ractive,t.__proto__=Array.prototype}):(i=function(t){var n,i;for(n=a.length;n--;)i=a[n],e(t,i,{value:s[i]})},r=function(t){var e;for(e=a.length;e--;)delete t[a[e]];delete t._ractive})}(n),n.namespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},function(t,e){t.splitKeypath=function(t){var n,i,r,s,o;if(e[t])return e[t].concat();for(r=[],s=t,i=0;s.length;){if(n=s.indexOf(".",i),-1===n)o=s,s="";else{if("\\"===s.charAt(n-1)&&"\\"!==s.charAt(n-2)){i=n+1;continue}o=s.substr(0,n),i=0}/\[/.test(o)?r=r.concat(o.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):r[r.length]=o,s=s.substring(n+1)}return e[t]=r,r.concat()}}(n,{}),e.adaptors.backbone=function(t,e){var n,i,r,s,o,a,h;return e&&(e+=".",o=RegExp("^"+e.replace(/\./g,"\\.")),a=e.length),console.log(e),{init:function(p){e?(h=function(t){var n,i;i={};for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i},s=function(t){n||(i=!0,p.set(h(t.changed)),i=!1)},r=function(e,r){i||o.test(e)&&(n=!0,t.set(e.substring(a),r),n=!1)}):(s=function(t){n||(i=!0,p.set(t.changed),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)}),t.on("change",s),p.on("set",r),p.set(e?h(t.attributes):t.attributes)},teardown:function(e){t.off("change",s),e.off("set",r)}}},e.adaptors.statesman=function(t,e){var n,i,r,s;return e=e?e+".":"",{init:function(e){s=function(t,r){n||(i=!0,e.set(t,r),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)},t.on("set",s),e.on("set",r),e.set(t.get())},teardown:function(e){t.off("change",s),e.off("set",r)}}},x.animate=function(t,e,i){var r,s,o,a,h;for(i=i||{},a=animationCollection.animations.length;a--;)animationCollection.animations[a].keypath===t&&animationCollection.animations[a].stop();i.easing&&(r="function"==typeof i.easing?i.easing:this.easing&&this.easing[i.easing]?this.easing[i.easing]:R.easing[i.easing],"function"!=typeof r&&(r=null)),s=void 0===i.duration?400:i.duration,h=n.splitKeypath(t),o=new n.Animation({keys:h,from:this.get(h),to:e,root:this,duration:s,easing:r,step:i.step,complete:i.complete}),animationCollection.push(o)},e.easing={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},e.interpolate=function(t,i){return n.isNumeric(t)&&n.isNumeric(i)?e.interpolators.number(+t,+i):n.isArray(t)&&n.isArray(i)?e.interpolators.array(t,i):n.isObject(t)&&n.isObject(i)?e.interpolators.object(t,i):function(){return i}},e.interpolators={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var i,r,s,o;for(i=[],r=[],o=s=Math.min(t.length,n.length);o--;)r[o]=e.interpolate(t[o],n[o]);for(o=s;t.length>o;o+=1)i[o]=t[o];for(o=s;n.length>o;o+=1)i[o]=n[o];return function(t){for(var e=s;e--;)i[e]=r[e](t);return i}},object:function(t,n){var i,r,s,o,a=[];s={},r={};for(o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)?(a[a.length]=o,r[o]=e.interpolate(t[o],n[o])):s[o]=t[o]);for(o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(s[o]=n[o]);return i=a.length,function(t){for(var e,n=i;n--;)e=a[n],s[e]=r[e](t);return s}}},n.Animation=function(t){var n;this.startTime=Date.now();for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},n.Animation.prototype={tick:function(){var t,e,n,i;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keys,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keys,n),this.step&&this.step(e,n),!0)):!1},stop:function(){this.running=!1}},function(){var t,e;e="undefined"!=typeof window?window:{},function(t,e,n){var i;for(i=0;t.length>i&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[i]+"CancelAnimationFrame"]||n[t[i]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var i,r,s;return i=Date.now(),r=Math.max(0,16-(i-e)),s=n.setTimeout(function(){t(i+r)},r),e=i+r,s}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){n.clearTimeout(t)})}(["ms","moz","webkit","o"],0,e),t={animations:[],tick:function(){var t,n;for(t=0;this.animations.length>t;t+=1)n=this.animations[t],n.tick()||this.animations.splice(t--,1);this.animations.length?e.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){t.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}}}(n);var e=e||{},n=n||{};(function(t,e){t.compile=function(t,n){var i,r,s;return n=n||{},n.sanitize===!0&&(n.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),i=e.tokenize(t,n),r=e.getFragmentStubFromTokens(i,0,n,n.preserveWhitespace),s=r.toJson(),"string"==typeof s?[s]:(console.log("compiled:",s),s)},e.getFragmentStubFromTokens=function(t,e,n,i){var r,s;return console.log("preserveWhitespace",i),r={pos:0,tokens:t,next:function(){return r.tokens[r.pos]},options:n},s=a.fragment(r,e,i)}})(e,n),function(t){var e,i,r,s,o,a,p,c,u,l;t.element=function(t,n,i){var r,s=t.next();return s.type===w?(r=new e(s,t,n,i),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(r.lcTag)?null:r):null},i="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),r="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),s="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),o={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},a=function(t){return"on"!==t.name.substr(0,2)},p=function(t){return"proxy-"!==t.name.substr(0,6)},c=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1},u=/^\s+/,l=/\s+$/,e=function(e,r,s,d){var f,m,g,v,s,y,x;for(this.tag=e.name,this.lcTag=this.tag.toLowerCase(),this.priority=s=s||0,r.pos+=1,d=d||"pre"===this.lcTag,e.attrs&&(g=e.attrs.filter(p),v=e.attrs.filter(c),r.options.sanitize&&r.options.sanitize.eventAttributes&&(g=g.filter(a)),y=function(t){return{name:t.name,value:n.getFragmentStubFromTokens(t.value,s+1)}},g.length&&(this.attributes=g.map(y)),v.length&&(this.proxies=v.map(y))),(e.selfClosing||-1!==i.indexOf(this.lcTag))&&(f=!0),this.siblings=o[this.lcTag],this.items=[],m=r.next();m;){if(m.type===w){if(m.closing){m.name.toLowerCase()===this.lcTag&&(r.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(m.name.toLowerCase()))break}this.items[this.items.length]=t.item(r,this.priority+1),m=r.next()}d||(x=this.items[0],x&&x.type===h&&(x.text=x.text.replace(u,""),x.text||this.items.shift()),x=this.items[this.items.length-1],x&&x.type===h&&(x.text=x.text.replace(l,""),x.text||this.items.pop()))},e.prototype={toJson:function(t){var e,n,i,r,s;if(e={t:f,e:this.tag},this.attributes&&this.attributes.length)for(e.a={},s=this.attributes.length,r=0;s>r;r+=1)n=this.attributes[r].name,void 0===this.attributes[r].value&&(i=null),i=b.jsonify(this.attributes[r].value.items,t),e.a[n]=i;if(this.items.length&&(e.f=b.jsonify(this.items,t)),this.proxies&&this.proxies.length)for(e.x={},s=this.proxies.length,r=0;s>r;r+=1)n=this.proxies[r].name,i=b.jsonify(this.proxies[r].value.items,t),e.x[n]=i;return this.json=e,e},toString:function(){var t,e,n,s,o,a,h;if(void 0!==this.str)return this.str;if(-1===r.indexOf(this.tag.toLowerCase()))return this.str=!1;if(a=b.stringify(this.items),a===!1)return this.str=!1;if(this.proxies)return this.str=!1;if(h=-1!==i.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(e=0,n=this.attributes.length;n>e;e+=1){if(-1!==this.attributes[e].name.indexOf(":"))return this.str=!1;if(s=" "+this.attributes[e].name,void 0!==this.attributes[e].value){if(o=""+this.attributes[e].value,o===!1)return this.str=!1;""!==o&&(s+="=",s+=/[\s"'=<>`]/.test(o)?'"'+o.replace(/"/g,"&quot;")+'"':o)}t+=s}return this.isSelfClosing&&!h?(t+="/>",this.str=t):(t+=">",h?this.str=t:(t+=a,t+="</"+this.tag+">",this.str=t))}}}(a),function(t){var e;t.fragment=function(t,n,i){return new e(t,n,i)},e=function(e,n,i){var r,s;for(r=this.items=[],s=t.item(e,n,i);null!==s;)r[r.length]=s,s=t.item(e,n,i)},e.prototype={toJson:function(t){console.group("jsonifying fragment",this);var e=b.jsonify(this.items,t);return console.log(e),console.groupEnd(),e},toString:function(){console.group("stringifying fragment",this);var t=b.stringify(this.items);return console.log(t),console.groupEnd(),t}}}(a),a.item=function(t,e,n){return t.next()?a.text(t,n)||a.mustache(t,e,n)||a.element(t,e,n):null},function(t){var e,n;t.mustache=function(t,i,r){var s=t.next();return s.type===y||s.type===c?s.mustacheType===u||s.mustacheType===l?new n(s,t,i,r):new e(s,t,i):null},e=function(t,e,n){this.type=t.type===c?c:t.mustacheType,this.ref=t.ref,this.expr=t.expr,this.priority=n,e.pos+=1},e.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.m=this.expr),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}},n=function(e,n,i,r){var s;for(this.ref=e.ref,this.indexRef=e.indexRef,this.expr=e.expr,this.priority=i||0,this.inverted=e.mustacheType===l,n.pos+=1,this.items=[],s=n.next();s;){if(s.mustacheType===d&&(s.ref===this.ref||s.expr&&this.expr)){n.pos+=1;break}this.items[this.items.length]=t.item(n,this.priority+1,r),s=n.next()}},n.prototype={toJson:function(t){var e;return this.json?this.json:(e={t:u},this.ref&&(e.r=this.ref),this.indexRef&&(e.i=this.indexRef),this.inverted&&(e.n=!0),this.expr&&(e.m=this.expr),this.items.length&&(e.f=b.jsonify(this.items,t)),this.priority&&(e.p=this.priority),this.json=e,e)},toString:function(){return!1}}}(a),function(t){var e,n,i,r;t.text=function(t,n){var i=t.next();return i.type===h?(t.pos+=1,new e(i,n)):null},n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},i=function(t){var e;return e=t.replace(/&([a-zA-Z]+);/,function(t,e){return n[e]?String.fromCharCode(n[e]):t}),e=e.replace(/&#x([0-9]+);/,function(t,e){return String.fromCharCode(parseInt(e,16))}),e=e.replace(/&#([0-9]+);/,function(t,e){return String.fromCharCode(e)})},r=/\s+/g,e=function(t,e){this.type=h,console.log('text: "%s". preserveWhitespace:',t.value,e),this.text=e?t.value:t.value.replace(r," "),console.log('text: "%s"',this.text)},e.prototype={toJson:function(){return this.decoded||(this.decoded=i(this.text))},toString:function(){return this.text}}}(a);var b={stringify:function(t){var e,n,i,r="";for(n=0,i=t.length;i>n;n+=1){if(e=""+t[n],e===!1)return!1;r+=e}return r},jsonify:function(t,e){var n,i;return e||(n=b.stringify(t),n===!1)?i=t.map(function(t){return t.toJson(e)}):n}};(function(t,e){var n,i;e.tokenize=function(t,n){var i,r;return n=n||{},i={str:e.stripHtmlComments(t),pos:0,delimiters:n.delimiters||["{{","}}"],tripleDelimiters:n.tripleDelimiters||["{{{","}}}"],remaining:function(){return i.str.substring(i.pos)}},r=o.start(i),e.stripStandalones(r),e.stripCommentTokens(r),r},n=/\s/,i={"#":u,"^":l,"/":d,">":m,"!":g,"&":p}})(e,n),o.regex=function(t){return function(e){var n=t.exec(e.str.substring(e.pos));return n?(e.pos+=n[0].length,n[1]||n[0]):null}},o.nullSentinel={},function(t){var e=t.regex(/^[^\s=]+/);t.delimiterChange=function(n){var i,r,s;return t.generic(n,"=")?(i=n.pos,t.whitespace(n),(r=e(n))?(t.whitespace(n),(s=e(n))?(t.whitespace(n),t.generic(n,"=")?[r,s]:(n.pos=i,null)):(n.pos=i,null)):(n.pos=i,null)):null}}(o),o.generic=function(t,e){var n;return n=t.str.substr(t.pos,e.length),n===e?(t.pos+=e.length,e):null},o.expressionList=function(t){var e,n,i,r;if(e=t.pos,i=o.expression(t),null===i)return null;if(n=[i],o.whitespace(t),o.generic(t,",")){if(r=o.expressionList(t),null===r)return t.pos=e,null;n=n.concat(r)}return n},o.expression=function(t){var e,n;return e=t.pos,o.whitespace(t),n=q(t)||D(t)||j(t)||V(t)||I(t)||S(t)};var N,E,k,A=function(t,e){return function(n){var i,r,s;return(r=e(n))?(i=n.pos,o.whitespace(n),o.generic(n,t)?(o.whitespace(n),s=o.expression(n),s?{symbol:t,expressions:[r,s]}:(n.pos=i,r)):(n.pos=i,r)):null}},T=function(t){var e,n;return e=t.pos,o.generic(t,"(")?(o.whitespace(),(n=o.expression(t))?(o.whitespace(),o.generic(t,")")?void 0:(t.pos=e,null)):(t.pos=e,null)):null},O=function(t){var e=o.literal(t)||o.reference(t)||T(t);return e},_=function(t){var e,n,i;if(e=O(t),!e)return null;if(n=o.refinement(t),!n)return e;for(;null!==n;)i={type:"MEMBER",expr:e,refinement:n},e=i,n=o.refinement(t);return i},L=function(t){var e,n,i,r;return(n=_(t))?(e=t.pos,o.generic(t,"(")?(o.whitespace(t),i=o.expressionList(t),o.whitespace(t),o.generic(t,")")?(r={type:"INVOCATION",expression:n},i&&(r.parameters=i),r):(t.pos=e,n)):n):null},F="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),M=L;for(N=0,E=F.length;E>N;N+=1)k=A(F[N],M),M=k;var C=M,S=function(t){var e,n,i,r;return(n=C(t))?(e=t.pos,o.whitespace(t),o.generic(t,"?")?(o.whitespace(t),(i=o.expression(t))?(o.whitespace(t),r=o.expression(t),r?{symbol:"?:",expressions:[n,i,r]}:(t.pos=e,n)):(t.pos=e,n)):(t.pos=e,n)):null},P=function(t,e){return function(n){var i,r;return i=n.pos,o.generic(n,t)?(o.whitespace(n),r=o.expression(n),r?{type:e,expression:r}:(n.pos=i,null)):null}},I=P("!","LOGICAL_NOT"),V=P("~","BITWISE_NOT"),j=P("+","UNARY_PLUS"),D=P("-","UNARY_NEGATION"),q=P("typeof","TYPEOF");o.arrayLiteral=function(t){var e,n;return e=t.pos,o.whitespace(t),o.generic(t,"[")?(n=o.expressionList(t),o.generic(t,"]")?{type:"ARRAY_LITERAL",members:n}:(t.pos=e,null)):(t.pos=e,null)},o.literal=function(t){return o.numberLiteral(t)||o.stringLiteral(t)||o.objectLiteral(t)||o.arrayLiteral(t)},o.numberLiteral=function(t){var e,n;return e=t.pos,n=o.integer(t),null===n?null:(n+=o.fraction(t)||"",n+=o.exponent(t)||"",{type:"NUMBER_LITERAL",value:+n})},o.objectLiteral=function(t){var e,n,i,r,s;if(e=t.pos,o.whitespace(t),!o.generic(t,"{"))return t.pos=e,null;if(n={},i=o.keyValuePairs(t))for(r=i.length;r--;){if(s=i[r],n.hasOwnProperty(s.key))throw Error("An object cannot have multiple keys with the same name");n[s.key]=s.value}return o.whitespace(t),o.generic(t,"}")?{type:"OBJECT_LITERAL",value:n}:(t.pos=e,null)},o.keyValuePairs=function(t){var e,n,i,r;return e=t.pos,i=o.keyValuePair(t),null===i?null:(n=[i],o.generic(t,",")?(r=o.keyValuePairs(t),r?n.concat(r):(t.pos=e,null)):n)},o.keyValuePair=function(t){var e,n,i;return e=t.pos,o.whitespace(t),n=o.key(t),null===n?(t.pos=e,null):(o.whitespace(t),o.generic(t,":")?(o.whitespace(t),i=o.expression(t),null===i?(t.pos=e,null):(i===o.nullSentinel&&(i=null),{key:n,value:i})):(t.pos=e,null))},o.key=function(t){return o.name(t)||o.stringLiteral(t)||o.numberLiteral(t)},o.stringLiteral=function(t){var e,n;return e=t.pos,o.generic(t,'"')?(n=o.doubleQuotedString(t),o.generic(t,'"')?{type:"STRING_LITERAL",value:n}:(t.pos=e,null)):o.generic(t,"'")?(n=o.singleQuotedString(t),o.generic(t,"'")?{type:"STRING_LITERAL",value:n}:(t.pos=e,null)):null},o.singleQuotedString=function(t){var e,n,i,r,s;if(e=t.pos,n="",i=o.escapedChars(t),i&&(n+=i),r=o.unescapedSingleQuotedChars(t),r&&(n+=r),n)for(s=o.singleQuotedString(t);s;)n+=s,s=o.singleQuotedString(t);return n},o.unescapedSingleQuotedChars=o.regex(/^[^\\']+/),o.doubleQuotedString=function(t){var e,n,i,r,s;if(e=t.pos,n="",i=o.escapedChars(t),i&&(n+=i),r=o.unescapedDoubleQuotedChars(t),r&&(n+=r),!n)return"";for(s=o.doubleQuotedString(t);""!==s;)n+=s;return n},o.unescapedDoubleQuotedChars=o.regex(/^[^\\"]+/),o.escapedChars=function(t){var e,n="";for(e=o.escapedChar(t);e;)n+=e,e=o.escapedChar(t);return n||null},o.escapedChar=function(t){var e;return o.generic(t,"\\")?(e=t.str.charAt(t.pos),t.pos+=1,e):null},o.digits=o.regex(/^[0-9]+/),o.exponent=o.regex(/^[eE][\-+]?[0-9]+/),o.fraction=o.regex(/^\.[0-9]+/),o.integer=o.regex(/^(0|[1-9][0-9]*)/),o.name=o.regex(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),o.reference=function(t){var e=o.name(t);return null===e?null:{type:"REFERENCE",name:e}},o.refinement=function(t){var e,n,i;return e=t.pos,o.generic(t,".")?(n=o.name(t))?{type:"REFINEMENT",name:n}:(t.pos=e,null):o.generic(t,"[")?(i=o.expression(t),i&&o.generic(t,"]")?{type:"REFINEMENT",expr:i}:(t.pos=e,null)):null},o.mustache=function(t){var e,n=t.pos;return o.generic(t,t.delimiters[0])?(e=o.delimiterChange(t))?o.generic(t,t.delimiters[1])?(t.delimiters=e,{type:y,mustacheType:v}):(t.pos=n,null):(e=o.mustacheContent(t),null===e?(t.pos=n,null):(o.whitespace(t),o.generic(t,t.delimiters[1])?e:(t.pos=n,null))):null},o.mustacheContent=function(t){var e,n,i,r,s,a,h;return e=t.pos,n={type:y},i=o.mustacheType(t),n.mustacheType=i||p,i===g&&(a=t.remaining(),h=a.indexOf(t.delimiters[1]),-1!==h)?(t.pos+=h,n):(o.whitespace(t),o.generic(t,"(")?(r=o.expression(t))?(o.whitespace(t),o.generic(t,")")?(n.expression=r,n):(t.pos=e,null)):(t.pos=e,null):(n.ref=o.mustacheRef(t),n.ref?(s=o.indexRef(t),null!==s&&(n.indexRef=s),n):(t.pos=e,null)))},o.indexRef=o.regex(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),function(t){var e,n,i,r;t.mustacheRef=function(n){var i,r,s;if(i=n.pos,t.generic(n,"."))return".";if(r=t.name(n),!r)return null;for(s=e(n);null!==s;)r+=s,s=e(n);return r},e=function(t){return n(t)||i(t)},n=t.regex(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),i=function(t){var e=r(t);return e?"."+e:null},r=t.regex(/^\[(0|[1-9][0-9]*)\]/)}(o);var K={"#":u,"^":l,"/":d,">":m,"!":g,"&":p};o.mustacheType=function(t){var e=K[t.str.charAt(t.pos)];return e?(t.pos+=1,e):null},o.start=function(t){for(var e,n=[];t.pos<t.str.length;){if(e=o.mustache(t)||o.triple(t)||o.tag(t)||o.text(t),!e)throw console.log("failed at",e),console.log("progress:",n.slice()),Error("Could not parse template");n[n.length]=e}return n},o.tag=function(t){return o.openingTag(t)||o.closingTag(t)},o.attr=function(t){var e,n,i;return(n=o.attrName(t))?(e={name:n},i=o.attrValue(t),i&&(e.value=i),e):null},function(t,e){t.attrName=function(n){var i,r;return i=n.pos,t.whitespace(n),(r=e.exec(n.str.substring(n.pos)))?(n.pos+=r[0].length,r[0]):null}}(o,/^[^\s"'>\/=]+/,/\s+/),o.attrValue=function(t){var e,n;return e=t.pos,o.whitespace(t),o.generic(t,"=")?(n=o.singleQuotedAttrValue(t)||o.doubleQuotedAttrValue(t)||o.unquotedAttrValue(t),null===n?(t.pos=e,null):n):(t.pos=e,null)
},function(t){var e=function(e){var n,i,r;return n=e.pos,(i=t.doubleQuotedString(e))?(-1!==(r=i.indexOf(e.delimiters[0]))&&(i=i.substr(0,r),e.pos=n+i.length),{type:h,value:i}):null};t.doubleQuotedAttrValue=function(n){var i,r,s;if(i=n.pos,!t.generic(n,'"'))return null;for(r=[],s=t.mustache(n)||e(n);null!==s;)r[r.length]=s,s=t.mustache(n)||e(n);return t.generic(n,'"')?r:(n.pos=i,null)}}(o),function(t){var e=function(e){var n,i,r;return n=e.pos,(i=t.singleQuotedString(e))?(-1!==(r=i.indexOf(e.delimiters[0]))&&(i=i.substr(0,r),e.pos=n+i.length),{type:h,value:i}):null};t.singleQuotedAttrValue=function(n){var i,r,s;if(i=n.pos,!t.generic(n,"'"))return null;for(r=[],s=t.mustache(n)||e(n);null!==s;)r[r.length]=s,s=t.mustache(n)||e(n);return t.generic(n,"'")?r:(n.pos=i,null)}}(o),function(t){var e=t.regex(/^[^\s"'=<>`]+/),n=function(t){var n,i,r;return n=t.pos,(i=e(t))?(-1!==(r=i.indexOf(t.delimiters[0]))&&(i=i.substr(0,r),t.pos=n+i.length),{type:h,value:i}):null};t.unquotedAttrValue=function(e){var i,r;for(i=[],r=t.mustache(e)||n(e);null!==r;)i[i.length]=r,r=t.mustache(e)||n(e);return i.length?i:null}}(o),o.attrs=function(t){var e,n;if(n=o.attr(t),!n)return null;for(e=[];null!==n;)e[e.length]=n,n=o.attr(t);return e},o.closingTag=function(t){var e,n;return e=t.pos,o.generic(t,"<")?(n={type:w,closing:!0},o.generic(t,"/")?(n.name=o.tagName(t),n.name?o.generic(t,">")?n:(t.pos=e,null):(t.pos=e,null)):(t.pos=e,null)):null},o.openingTag=function(t){var e,n,i;return e=t.pos,o.generic(t,"<")?(n={type:w},n.name=o.tagName(t),n.name?(i=o.attrs(t),i&&(n.attrs=i),o.generic(t,"/")&&(n.selfClosing=!0),o.generic(t,">")?n:(t.pos=e,null)):(t.pos=e,null)):null},function(t,e){t.tagName=function(t){var n;return(n=e.exec(t.str.substring(t.pos)))?(t.pos+=n[0].length,n[0]):null}}(o,/^[a-zA-Z][a-zA-Z0-9]*/),o.text=function(t){var e,n;return e=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(n){var i=t.str.indexOf(n,t.pos);-1!==i&&(e=Math.min(i,e))}),e===t.pos?null:(n=t.str.substring(t.pos,e),t.pos=e,{type:h,value:n})},o.triple=function(t){var e,n=t.pos;return o.generic(t,t.tripleDelimiters[0])?(e=o.delimiterChange(t))?o.generic(t,t.delimiters[1])?(t.tripleDelimiters=e,{type:v}):(t.pos=n,null):(o.whitespace(t),e=o.mustacheRef(t),null===e?(t.pos=n,null):(o.whitespace(t),o.generic(t,t.tripleDelimiters[1])?{type:c,ref:e}:(t.pos=n,null))):null},function(t,e){t.whitespace=function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[0]):null}}(o,/^\s+/),n.stripCommentTokens=function(t){var e,n,i,r;for(console.log("stripping comment tokens from",t.slice()),e=0;t.length>e;e+=1)n=t[e],i=t[e-1],r=t[e+1],(n.mustacheType===g||n.mustacheType===v)&&(t.splice(e,1),i&&r&&i.type===h&&r.type===h&&(i.value+=r.value,t.splice(e,1)),e-=1);return t},n.stripHtmlComments=function(t){var e,n,i;for(i="";t.length;){if(e=t.indexOf("<!--"),n=t.indexOf("-->"),-1===e&&-1===n){i+=t;break}if(-1!==e&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===e||e>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=t.substr(0,e),t=t.substring(n+3)}return i},n.stripStandalones=function(t){var e,n,i,r,s,o;for(s=/^\s*\r?\n/,o=/\r?\n\s*$/,e=2;t.length>e;e+=1)n=t[e],i=t[e-1],r=t[e-2],n.type===h&&i.type===y&&r.type===h&&o.test(r.value)&&s.test(n.value)&&(i.mustacheType!==p&&i.mustacheType!==c&&(r.value=r.value.replace(o,"\n")),n.value=n.value.replace(s,""),""===n.value&&t.splice(e--,1));return t},e.extend=function(t){var n,i,r;n=this,i=function(){e.apply(this,arguments),this.init&&this.init.apply(this,arguments)};for(r in n.prototype)n.prototype.hasOwnProperty(r)&&(i.prototype[r]=n.prototype[r]);for(r in t)if(t.hasOwnProperty(r)){if(e.prototype.hasOwnProperty(r))throw Error('Cannot override "'+r+'" method or property of Ractive prototype');i.prototype[r]=t[r]}return i.extend=n.extend,i},function(t){var n,i,r,s,o,a,h,l,d,g;r={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},i="undefined"!=typeof window?window.document:null,n=function(t,e){var n,r=[];for(n=i.createElement("div"),n.innerHTML=t;n.firstChild;)r[r.length]=n.firstChild,e.appendChild(n.firstChild);return r},t.DomFragment=function(e){return this.docFrag=i.createDocumentFragment(),"string"==typeof e.descriptor?(this.nodes=n(e.descriptor,this.docFrag),void 0):(t.Fragment.call(this,e),void 0)},t.DomFragment.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new s(t,this.docFrag);switch(t.descriptor.t){case p:return new l(t,this.docFrag);case u:return new g(t,this.docFrag);case c:return new d(t,this.docFrag);case f:return new o(t,this.docFrag);case m:return new a(t,this.docFrag);default:throw console.log(t.descriptor),"WTF? not sure what happened here..."}},teardown:function(){var t;if(this.nodes)for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);else for(;this.items.length;)this.items.pop().teardown()},firstNode:function(){return this.items[0]?this.items[0].firstNode():null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():null}},a=function(e,n){this.parentFragment=e.parentFragment,this.fragment=new t.DomFragment({descriptor:e.root.partials[e.descriptor.r]||[],root:e.root,parentNode:e.parentNode,contextStack:e.contextStack,owner:this}),n.appendChild(this.fragment.docFrag)},a.prototype={teardown:function(){this.fragment.teardown()}},s=function(t,e){this.node=i.createTextNode(t.descriptor),this.root=t.root,this.parentNode=t.parentNode,e.appendChild(this.node)},s.prototype={teardown:function(){this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},o=function(e,n){var r,s,o,a,p,c,u,l;if(r=this.descriptor=e.descriptor,this.root=e.root,this.parentFragment=e.parentFragment,this.parentNode=e.parentNode,this.index=e.index,this.eventListeners=[],this.customEventListeners=[],r.a&&r.a.xmlns){if(s=r.a.xmlns,"string"!=typeof s)throw Error("Namespace attribute cannot contain mustaches")}else s=this.parentNode.namespaceURI;if(this.node=i.createElementNS(s,r.e),r.f&&("string"==typeof r.f&&this.node.namespaceURI===t.namespaces.html?this.node.innerHTML=r.f:(this.children=new t.DomFragment({descriptor:r.f,root:e.root,parentNode:this.node,contextStack:e.contextStack,owner:this}),this.node.appendChild(this.children.docFrag))),r.x)for(o in r.x)r.x.hasOwnProperty(o)&&this.addEventProxy(o,r.x[o],e.contextStack);this.attributes=[],u=[];for(p in r.a)r.a.hasOwnProperty(p)&&(c=r.a[p],a=new h({element:this,name:p,value:void 0===c?null:c,root:e.root,parentNode:this.node,contextStack:e.contextStack}),this.attributes[this.attributes.length]=a,a.isBindable&&u.push(a),a.isTwowayNameAttr?l=a:a.update());for(;u.length;)u.pop().bind(this.root.lazy);l&&(l.updateViewModel(),l.update()),n.appendChild(this.node)},o.prototype={addEventProxy:function(n,i,r){var s,o,a,h,p=this,c=this.root;"string"==typeof i?(c._proxies[i]||(c._proxies[i]=function(t){c.fire(i,t,this)}),h=c._proxies[i]):(a=new t.TextFragment({descriptor:i,root:this.root,owner:this,contextStack:r}),h=function(t){c.fire(a.getValue(),t,p.node)}),(s=e.eventDefinitions[n])?(o=s(this.node,h),this.customEventListeners[this.customEventListeners.length]=o):void 0!==this.node["on"+n]?(this.eventListeners[this.eventListeners.length]={n:n,h:h},this.node.addEventListener(n,h)):console&&console.warn&&console.warn("Invalid event handler ("+n+")")},teardown:function(){var t;for(this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node),this.children&&this.children.teardown();this.attributes.length;)this.attributes.pop().teardown();for(;this.eventListeners.length;)t=this.eventListeners.pop(),this.node.removeEventListener(t.n,t.h);for(;this.customEventListeners.length;)this.customEventListeners.pop().teardown()},firstNode:function(){return this.node},bubble:function(){}},h=function(e){var n,i,s,o,a,h,p,c;if(n=e.name,i=e.value,this.element=e.element,s=n.indexOf(":"),-1!==s&&(o=n.substr(0,s),"xmlns"!==o&&(n=n.substring(s+1),this.namespace=t.namespaces[o],!this.namespace)))throw'Unknown namespace ("'+o+'")';return null===i||"string"==typeof i?(this.namespace?e.parentNode.setAttributeNS(this.namespace,n,i):e.parentNode.setAttribute(n,i),"id"===n.toLowerCase()&&(e.root.nodes[i]=e.parentNode),void 0):(this.root=e.root,this.parentNode=e.parentNode,this.name=n,this.lcName=n.toLowerCase(),this.children=[],this.namespace||e.parentNode.namespaceURI!==t.namespaces.html||(p=this.lcName,c=r[p]||p,void 0!==e.parentNode[c]&&(this.propertyName=c),("boolean"==typeof e.parentNode[c]||"value"===c)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new t.TextFragment({descriptor:i,root:this.root,owner:this,contextStack:e.contextStack}),1===this.fragment.items.length&&(this.selfUpdating=!0),this.root.twoway&&(a=this.element.descriptor.e.toLowerCase(),h=!("name"!==c&&"value"!==c&&"checked"!==c||"input"!==a&&"textarea"!==a&&"select"!==a)),h&&(this.isBindable=!0,"name"===c&&(this.isTwowayNameAttr=!0)),this.ready=!0,this.isTwowayNameAttr||this.update(),void 0)},h.prototype={bind:function(t){var e,n,i,r,s,o=this,a=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==p)throw"Not a valid two-way data binding candidate - must be a single interpolator";if(this.interpolator=this.fragment.items[0],e=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===a.tagName&&"value"===this.propertyName)for(n=a.getElementsByTagName("option"),s=n.length,r=0;s>r;r+=1)if(i=n[r],i.hasAttribute("selected")){this.root.set(e,i.value);break}"checkbox"===a.type||"radio"===a.type?"name"===this.propertyName?(a.name="{{"+e+"}}",this.updateViewModel=function(){a.checked&&o.root.set(e,a.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){o.root.set(e,a.checked)}):this.updateViewModel=function(){var t;t=a.value,"0"===t?t=0:""!==t&&(t=+t||t),o.root.set(e,t)},this.updateViewModel&&(this.twoway=!0,a.addEventListener("change",this.updateViewModel),a.addEventListener("click",this.updateViewModel),a.addEventListener("blur",this.updateViewModel),t||(a.addEventListener("keyup",this.updateViewModel),a.addEventListener("keydown",this.updateViewModel),a.addEventListener("keypress",this.updateViewModel),a.addEventListener("input",this.updateViewModel)))},teardown:function(){if(this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.children)for(;this.children.length;)this.children.pop().teardown()},bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var t,e;if(!this.ready)return this;if("id"===this.lcName&&(void 0!==this.id&&delete this.root.nodes[this.id],this.root.nodes[this.id]=this.parentNode),this.twoway){if(e=this.lcName,this.value=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=this.value===this.parentNode.value?!0:!1,this;if(i.activeElement===this.parentNode)return this}return t=this.fragment.getValue(),void 0===t&&(t=""),this.useProperty?(this.parentNode[this.propertyName]=t,this):this.namespace?(this.parentNode.setAttributeNS(this.namespace,this.name,t),this):(this.parentNode.setAttribute(this.name,t),this)}},l=function(e,n){this.node=i.createTextNode(""),n.appendChild(this.node),t.Mustache.call(this,e),this.cond&&!this.keypath&&this.update(!1)},l.prototype={teardown:function(){this.observerRefs?t.unobserveAll(this.root,this.observerRefs):t.cancelKeypathResolution(this.root,this),this.root.el.contains(this.node)&&this.parentNode.removeChild(this.node)},update:function(t){this.cond&&(t=this.cond[t?0:1]),t!==this.value&&(this.value=t,this.node.data=t)},firstNode:function(){return this.node}},d=function(e,n){this.nodes=[],this.docFrag=i.createDocumentFragment(),this.initialising=!0,t.Mustache.call(this,e),n.appendChild(this.docFrag),this.initialising=!1},d.prototype={teardown:function(){if(this.root.el.contains(this.parentNode))for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.observerRefs?t.unobserveAll(this.root,this.observerRefs):t.cancelKeypathResolution(this.root,this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},update:function(t){if(t!==this.html){for(this.html=t;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.nodes=n(t,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}}},g=function(e,n){this.fragments=[],this.length=0,this.docFrag=i.createDocumentFragment(),this.initialising=!0,t.Mustache.call(this,e),n.appendChild(this.docFrag),this.initialising=!1},g.prototype={teardown:function(){this.unrender(),this.observerRefs?t.unobserveAll(this.root,this.observerRefs):t.cancelKeypathResolution(this.root,this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown()},update:function(e){t.sectionUpdate.call(this,e),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(e){var n=new t.DomFragment(e);return this.docFrag.appendChild(n.docFrag),n}}}(n),function(t){var e,n,i,r;t.TextFragment=function(e){t.Fragment.call(this,e)},t.TextFragment.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new e(t.descriptor);switch(t.descriptor.t){case p:return new n(t);case c:return new i(t);case u:return new r(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.value=this.getValue(),this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&(t=this.items[0].value,void 0!==t)?t:""+this},toString:function(){return this.items.join("")}},e=function(t){this.text=t},e.prototype={toString:function(){return this.text},teardown:function(){}},n=function(e){t.Mustache.call(this,e),this.cond&&!this.keypath&&this.update(!1)},n.prototype={update:function(t){this.cond&&(t=this.cond[t?0:1]),t!==this.value&&(this.value=t,this.parentFragment.bubble())},teardown:function(){this.observerRefs?t.unobserveAll(this.root,this.observerRefs):t.cancelKeypathResolution(this.root,this)},toString:function(){return void 0===this.value?"":this.value}},i=n,r=function(e){this.fragments=[],this.length=0,t.Mustache.call(this,e)},r.prototype={teardown:function(){this.unrender(),this.observerRefs?t.unobserveAll(this.root,this.observerRefs):t.cancelKeypathResolution(this.root,this)},unrender:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},update:function(e){t.sectionUpdate.call(this,e),this.value=this.fragments.join(""),this.parentFragment.bubble()},createFragment:function(e){return new t.TextFragment(e)},toString:function(){return this.fragments.join("")}}}(n),n.Fragment=function(t){var e,n,i,r,s;if(this.owner=t.owner,this.owner.type===u&&(this.index=t.index),this.owner.parentFragment&&(r=this.owner.parentFragment.indexRefs)){this.indexRefs={};for(s in r)r.hasOwnProperty(s)&&(this.indexRefs[s]=r[s])}for(t.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[t.indexRef]=t.index),this.items=[],i={root:t.root,parentFragment:this,parentNode:t.parentNode,contextStack:t.contextStack},e=t.descriptor?t.descriptor.length:0,n=0;e>n;n+=1)i.descriptor=t.descriptor[n],i.index=n,this.items[this.items.length]=this.createItem(i)},n.Mustache=function(t){this.root=t.root,this.descriptor=t.descriptor,this.parentFragment=t.parentFragment,this.contextStack=t.contextStack||[],this.index=t.index||0,(t.parentNode||t.anchor)&&(this.parentNode=t.parentNode,this.anchor=t.anchor),this.type=t.descriptor.t,t.descriptor.c&&(this.cond=t.descriptor.c),n.registerMustache(this.root,this),!this.keypath&&this.descriptor.n&&this.update(!1)},n.sectionUpdate=function(t){var e,i,r,s,o;if(e={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.parentNode&&(e.anchor=this.parentFragment.findNextNode(this)),i=n.isArray(t),i&&0===t.length&&(r=!0),this.descriptor.n){if(t&&!r)this.length&&(this.unrender(),this.length=0);else if(!this.length)return e.contextStack=this.contextStack,e.index=0,this.fragments[0]=this.createFragment(e),this.length=1,void 0}else if(i){if(t.length<this.length)for(o=this.fragments.splice(t.length,this.length-t.length);o.length;)o.pop().teardown();else if(t.length>this.length)for(s=this.length;t.length>s;s+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+s),e.index=s,this.descriptor.i&&(e.indexRef=this.descriptor.i),this.fragments[s]=this.createFragment(e);this.length=t.length}else n.isObject(t)?this.length||(e.contextStack=this.contextStack.concat(this.keypath),e.index=0,this.fragments[0]=this.createFragment(e),this.length=1):t&&!r?this.length||(e.contextStack=this.contextStack,e.index=0,this.fragments[0]=this.createFragment(e),this.length=1):this.length&&(this.unrender(),this.length=0)},function(t){Date.now||(Date.now=function(){return+new Date}),t.createElementNS||(t.createElementNS=function(e,n){if(null!==e&&"http://www.w3.org/1999/xhtml"!==e)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml";return t.createElement(n)}),Element.prototype.contains||(Element.prototype.contains=function(t){for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),window.addEventListener||function(t,e,n,i,r,s,o){t[i]=e[i]=n[i]=function(t,e){var n=this;o.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,o[0][3])},t[r]=e[r]=n[r]=function(t,e){var n,i;for(n=0,i;i=o[n];++n)if(i[0]===this&&i[1]===t&&i[2]===e)return this.detachEvent("on"+t,o.splice(n,1)[0][3])},t[s]=e[s]=n[s]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&(r[n]=t.call(e,this[n],n,this));return r}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(r[r.length]=this[n]);return r})}(document),e.eventDefinitions.tap=function(t,e){var n,i,r,s;return r=5,s=400,n=function(t){var n,i,o,a,h,p;n=t.clientX,i=t.clientY,o=this,a=function(t){e.call(o,t),p()},h=function(t){(Math.abs(t.clientX-n)>=r||Math.abs(t.clientY-i)>=r)&&p()},p=function(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",a)},window.addEventListener("mousemove",h),window.addEventListener("mouseup",a),setTimeout(p,s)},t.addEventListener("mousedown",n),i=function(t){var n,i,o,a,h,p,c,u;1===t.touches.length&&(o=t.touches[0],h=o.identifier,a=this,c=function(t){var n;n=t.changedTouches[0],n.identifier!==h&&u(),e.call(n.target,t)},p=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==h)&&u(),e=t.touches[0],(Math.abs(e.clientX-n)>=r||Math.abs(e.clientY-i)>=r)&&u()},u=function(){window.removeEventListener("touchmove",p),window.removeEventListener("touchend",c),window.removeEventListener("touchcancel",u)},window.addEventListener("touchmove",p),window.addEventListener("touchend",c),window.addEventListener("touchcancel",u),setTimeout(u,s))},{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",i)}}},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e}(this);
//@ sourceMappingURL=tmp/source-map.js