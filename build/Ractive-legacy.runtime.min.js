(function(t){Date.now||(Date.now=function(){return+new Date}),t.createElementNS||(t.createElementNS=function(e,n){if(null!==e&&"http://www.w3.org/1999/xhtml"!==e)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml";return t.createElement(n)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),window.addEventListener||function(t,e,n,i,r,o,s){t[i]=e[i]=n[i]=function(t,e){var n=this;s.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,s[0][3])},t[r]=e[r]=n[r]=function(t,e){var n,i;for(n=0,i;i=s[n];++n)if(i[0]===this&&i[1]===t&&i[2]===e)return this.detachEvent("on"+t,s.splice(n,1)[0][3])},t[o]=e[o]=n[o]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&(r[n]=t.call(e,this[n],n,this));return r}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(r[r.length]=this[n]);return r})})(document),function(t){"use strict";var e,n,i,r,o,s,a,h,u,p,d,c,l,f,g,m,v,y,w,x,b,_,N,k,E,F={},O={},M={},L=function(){},A={},S="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",P=1,C=2,R=3,T=4,V=7,j=8,I={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};F.animate=function(t,n,i){var r,o,s,h,u;for(i=i||{},h=N.animations.length;h--;)N.animations[h].keypath===t&&N.animations[h].stop();i.easing&&(r="function"==typeof i.easing?i.easing:this.easing&&this.easing[i.easing]?this.easing[i.easing]:e.easing[i.easing],"function"!=typeof r&&(r=null)),o=void 0===i.duration?400:i.duration,u=a(t),s=new m({keys:u,from:this.get(u),to:n,root:this,duration:o,easing:r,step:i.step,complete:i.complete}),N.push(s)},F.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},F.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)},F.get=function(t){var e,n,i,r,o,s;if(!t)return this.data;if(h(t))e=t.slice(),n=e.join(".");else{if(this._cache.hasOwnProperty(t))return this._cache[t];e=a(t),n=e.join(".")}return this._cache.hasOwnProperty(n)?this._cache[n]:(i=e.pop(),o=e.length?this.get(e):this.data,"object"==typeof o&&o.hasOwnProperty(i)?(s=o[i],r=e.join("."),this._depsMap[r]||(this._depsMap[r]=[]),-1===this._depsMap[r].indexOf(n)&&this._depsMap[r].push(n),this.modifyArrays&&("("===n.charAt(0)||!h(s)||s.ractive&&s._ractive.setting||k(s,n,this)),this._cache[n]=s,s):void 0)};var q,D,U,B,z,Y;q=function(t){if(t.keypath)B(t.root,t.keypath,t,t.priority||0);else{var e=t.root._pendingResolution.indexOf(t);-1!==e&&t.root._pendingResolution.splice(e,1)}},D=function(t,e){var n,i,r=t._depsMap[e];if(t.modifyArrays&&"("!==e.charAt(0)&&(n=t._cache[e],h(n)&&!n._ractive.setting&&E(n,e,t)),delete t._cache[e],r)for(i=r.length;i--;)D(t,r[i])},U=function(t,e,n,i){var r;return t._deps[e]||(t._deps[e]=[]),r=t._deps[e],r[i]?(r=r[i],-1===r.indexOf(n)&&(r[r.length]=n),void 0):(r[i]=[n],void 0)},B=function(t,e,n,i){var r,o,s;for(r=t._deps[e][i],r.splice(r.indexOf(n),1),r.length||(t._deps[e][i]=null),o=t._deps[e].length;o--;)if(t._deps[e][o]){s=!0;break}s||(t._deps[e]=null)},z=function(t,e,n){var i,r,o,s,a,h;if(i=t._deps[e])for(a=i.length,o=0;a>o;o+=1)if(r=i[o])for(s=r.length;s--;)r[s].update();if(!n&&(h=t._depsMap[e]))for(o=h.length;o--;)z(t,h[o])},Y=function(t,e,n){var i,r,o,s,h,u;if("."===e)return n[n.length-1];for(i=a(e),r=i.pop(),n=n.concat();n.length;)if(o=n.pop(),s=a(o),h=t.get(s.concat(i)),"object"==typeof h&&h.hasOwnProperty(r)){u=o+"."+e;break}return u||void 0===t.get(e)||(u=e),u},F.link=function(t){var e=this;return function(n){e.set(t,n)}},function(t){var e;t.observe=function(t,n,i){var r,o=[];if("object"==typeof t){i=n;for(r in t)t.hasOwnProperty(r)&&(n=t[r],o[o.length]=e(this,r,n,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}return e(this,t,n,i)},e=function(t,e,n,i){var r,o,s;return i=i||{},s=i.context||t,r={update:function(){var i;i=t.get(e,!0),d(i,o)||(n.call(s,i,o),o=i)},cancel:function(){B(t,e,r,0)}},i.init!==!1&&r.update(),U(t,e,r,0),r}}(F),F.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},F.on=function(t,e){var n,i,r=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&(n[n.length]=this.on(i,t[i]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){r.off(t,e)}}},F.render=function(t){var e,n;if(e=t.el?c(t.el):this.el,!e)throw Error("You must specify a DOM element to render to");t.append||(e.innerHTML=""),t.complete&&(this._transitionManager=n=G(t.complete)),this.fragment=new l({descriptor:this.template,root:this,owner:this,parentNode:e}),e.appendChild(this.fragment.docFrag),this.ready=!0,t.complete&&(this._transitionManager=null,n.ready=!0,n.active||t.complete())},function(t){var e,n;t.set=function(t,i,r){var o,s,h,p,d,c;if(this.setting||(this.setting=!0,this.fire("set",t,i),this.setting=!1),s=[],o=[],r&&(this._transitionManager=c=G(r)),u(t))for(h in t)t.hasOwnProperty(h)&&(d=a(h),p=d.join("."),i=t[h],e(this,p,d,i,o,s));else d=a(t),p=d.join("."),e(this,p,d,i,o,s);if(o.length){for(;o.length;)z(this,o.pop());n(this)}for(;s.length;)z(this,s.pop(),!0);for(;this._def.length;)this._def.pop().update().deferred=!1;return r&&(this._transitionManager=null,c.ready=!0,c.active||r()),this},e=function(t,e,n,i,r,o){var s,a,h,u;if(u=n.slice(),s=t.get(e),s!==i){for(h=t.data;n.length>1;)a=n.shift(),h[a]||(h[a]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),h=h[a];a=n[0],h[a]=i}else if("object"!=typeof i)return;for(D(t,e),r[r.length]=e;u.length;)u.pop(),e=u.join("."),-1===o.indexOf(e)&&(o[o.length]=e)},n=function(t){var e,n,i;for(e=t._pendingResolution.length;e--;)n=t._pendingResolution.splice(e,1)[0],(i=Y(t,n.ref,n.contextStack))?n.resolve(i):t._pendingResolution[t._pendingResolution.length]=n}}(F),F.teardown=function(t){var e,n;t&&(this._transitionManager=n=G(t)),this.fragment.teardown(!0);for(e in this._depsMap)this._depsMap.hasOwnProperty(e)&&D(this,e);for(e in this._cache)this._cache.hasOwnProperty(e)&&D(this,e);for(;this._bound.length;)this.unbind(this._bound.pop());t&&(this._transitionManager=null,n.ready=!0,n.active||t())},F.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},F.update=function(t){return D(this,t||""),z(this,t||""),this.fire("update:"+t),this.fire("update",t),this},O.backbone=function(t,e){var n,i,r,o,s,a,h;return e&&(e+=".",s=RegExp("^"+e.replace(/\./g,"\\.")),a=e.length),{init:function(u){e?(h=function(t){var n,i;i={};for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i},o=function(t){n||(i=!0,u.set(h(t.changed)),i=!1)},r=function(e,r){i||s.test(e)&&(n=!0,t.set(e.substring(a),r),n=!1)}):(o=function(t){n||(i=!0,u.set(t.changed),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)}),t.on("change",o),u.on("set",r),u.set(e?h(t.attributes):t.attributes)},teardown:function(e){t.off("change",o),e.off("set",r)}}},O.statesman=function(t,e){var n,i,r,o;return e=e?e+".":"",{init:function(e){o=function(t,r){n||(i=!0,e.set(t,r),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)},t.on("set",o),e.on("set",r),e.set(t.get())},teardown:function(e){t.off("change",o),e.off("set",r)}}},n={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},M.tap=function(t,e){var n,i,r,o;return r=5,o=400,n=function(t){var n,i,s,a,h,u;n=t.clientX,i=t.clientY,s=this,a=function(t){e.call(s,t),u()},h=function(t){(Math.abs(t.clientX-n)>=r||Math.abs(t.clientY-i)>=r)&&u()},u=function(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",a)},window.addEventListener("mousemove",h),window.addEventListener("mouseup",a),setTimeout(u,o)},t.addEventListener("mousedown",n),i=function(t){var n,i,s,a,h,u,p;1===t.touches.length&&(s=t.touches[0],n=s.clientX,i=s.clientY,a=s.identifier,u=function(t){var n;n=t.changedTouches[0],n.identifier!==a&&p(),e.call(n.target,t)},h=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==a)&&p(),e=t.touches[0],(Math.abs(e.clientX-n)>=r||Math.abs(e.clientY-i)>=r)&&p()},p=function(){window.removeEventListener("touchmove",h),window.removeEventListener("touchend",u),window.removeEventListener("touchcancel",p)},window.addEventListener("touchmove",h),window.addEventListener("touchend",u),window.addEventListener("touchcancel",p),setTimeout(p,o))},{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",i)}}};var H=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])};i=function(t){var n,i,r,o,s,a,h,u;if(n=this,o=["el","preserveWhitespace","append","twoway","modifyArrays"],s=o.concat("data","template"),t.template)if("string"==typeof t.template){if(!e.parse)throw Error(S);a=e.parse(t.template)}else a=t.template;if(t.partials){h={};for(r in t.partials)if(t.partials.hasOwnProperty(r)){if("string"==typeof t.partials[r]){if(!e.parse)throw Error(S);u=e.parse(t.partials[r],t)}else u=t.partials[r];h[r]=u}}i=function(n){var i,r;for(!n.template&&a&&(n.template=a),n.data||(n.data={}),H(n.data,t.data),h&&(n.partials||(n.partials={}),H(n.partials,h)),i=o.length;i--;)r=o[i],!n.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(n[r]=t[r]);e.call(this,n),this.init&&this.init.call(this,n)};for(r in n.prototype)n.prototype.hasOwnProperty(r)&&(i.prototype[r]=n.prototype[r]);for(r in t)if(t.hasOwnProperty(r)&&-1===s.indexOf(r)){if(e.prototype.hasOwnProperty(r))throw Error('Cannot override "'+r+'" method or property of Ractive prototype');i.prototype[r]=t[r]}return i.extend=n.extend,i},r=function(t,n){return p(t)&&p(n)?e.interpolators.number(+t,+n):h(t)&&h(n)?e.interpolators.array(t,n):u(t)&&u(n)?e.interpolators.object(t,n):function(){return n}},o={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var i,r,o,s;for(i=[],r=[],s=o=Math.min(t.length,n.length);s--;)r[s]=e.interpolate(t[s],n[s]);for(s=o;t.length>s;s+=1)i[s]=t[s];for(s=o;n.length>s;s+=1)i[s]=n[s];return function(t){for(var e=o;e--;)i[e]=r[e](t);return i}},object:function(t,n){var i,r,o,s,a=[];o={},r={};for(s in t)t.hasOwnProperty(s)&&(n.hasOwnProperty(s)?(a[a.length]=s,r[s]=e.interpolate(t[s],n[s])):o[s]=t[s]);for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(o[s]=n[s]);return i=a.length,function(t){for(var e,n=i;n--;)e=a[n],o[e]=r[e](t);return o}}};var $={preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,data:{},lazy:!1,debug:!1,transitions:{}};e=function(t){var n,i,r,o,s;for(n in $)$.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=$[n]);if(this.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"==t?e:8|3&e,n.toString(16)}),this.modifyArrays=t.modifyArrays,this.twoway=t.twoway,this.lazy=t.lazy,this.debug=t.debug,this.el=c(t.el),this.data=t.data||{},this._subs={},this._cache={},this._deps={},this._depsMap={},this.nodes={},this._pendingResolution=[],this._def=[],this._proxies={},this._expressions=[],this.transitions=t.transitions,this._bound=[],t.bindings)if(h(t.bindings))for(r=0;t.bindings.length>r;r+=1)this.bind(t.bindings[r]);else this.bind(t.bindings);if(t.partials){this.partials={};for(n in t.partials)if(t.partials.hasOwnProperty(n)){if(i=t.partials[n],"string"==typeof i){if(!e.parse)throw Error(S);i=e.parse(i,t)}1===i.length&&"string"==typeof i[0]&&(i=i[0]),this.partials[n]=i}}if(o=t.template,"string"==typeof o){if(!e.parse)throw Error(S);if("#"===o.charAt(0)){if(s=document.getElementById(o.substring(1)),!s)throw Error("Could not find template element ("+o+")");o=e.parse(s.innerHTML,t)}else o=e.parse(o,t)}this.template=o&&1===o.length&&"string"==typeof o[0]?o[0]:o,this.el&&this.render({el:this.el,append:t.append,complete:t.complete})},function(){var t,e,i,r,o,a;r=document.createElement("div"),void 0!==r.style.transition?(e="transition",i="transitionend",t=!0):void 0!==r.style.webkitTransition?(e="webkitTransition",i="webkitTransitionEnd",t=!0):t=!1,o=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},a=t?function(t){return function(r,s){var a,h,u;u=t.duration||400,n=o(t.easing||"linear"),h=r.style[e],r.style[t.property]=t.from,setTimeout(function(){r.style[e]=u/1e3+"s "+t.property+" "+n,a=function(){r.removeEventListener(i,a),r.style.transition=h,s()},r.addEventListener(i,a),r.style[t.property]=t.to},0)}}:function(){return function(t,e){e()}},s={fadeIn:a({property:"opacity",from:0,to:1,duration:400,easing:"linear"}),fadeOut:a({property:"opacity",from:1,to:0,duration:400,easing:"linear"})}}(),m=function(t){var n;this.startTime=Date.now();for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},m.prototype={tick:function(){var t,e,n,i;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keys,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keys,n),this.step&&this.step(e,n),!0)):!1},stop:function(){this.running=!1}},N={animations:[],tick:function(){var e,n;for(e=0;this.animations.length>e;e+=1)n=this.animations[e],n.tick()||this.animations.splice(e--,1);this.animations.length?t.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){N.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,e,n){var i;for(i=0;t.length>i&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[i]+"CancelAnimationFrame"]||n[t[i]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var i,r,o;return i=Date.now(),r=Math.max(0,16-(i-e)),o=n.setTimeout(function(){t(i+r)},r),e=i+r,o}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){n.clearTimeout(t)})}(["ms","moz","webkit","o"],0,t),function(){var t,e,n,i,r,o,s;t=Object.defineProperty?Object.defineProperty:function(t,e,n){t[e]=n.value},k=function(e,i,r){var o,s,a;e._ractive?(o=e._ractive.roots,s=e._ractive.keypathsByGuid,s[r.guid]||(o[o.length]=r,s[r.guid]=[]),a=s[r.guid],-1===a.indexOf(i)&&(a[a.length]=i)):(t(e,"_ractive",{value:{roots:[r],keypathsByGuid:{}},configurable:!0}),e._ractive.keypathsByGuid[r.guid]=[i],n(e))},E=function(t,e,n){var r,o,s,a;if(!t._ractive)throw Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=t._ractive.roots,o=t._ractive.keypathsByGuid,!o[n.guid])throw Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(s=o[n.guid],a=s.indexOf(e),-1===a)throw Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");s.splice(a,1),s.length||(r.splice(r.indexOf(n),1),o[n.guid]=null),r.length||i(t)},e=function(t){var e,n,i,r,o,s;for(e=t._ractive.roots,n=t._ractive.keypathsByGuid,o=e.length;o--;)for(i=e[o],r=n[i.guid],s=r.length;s--;)i.set(r[s],t)},r=[],s=["pop","push","reverse","shift","sort","splice","unshift"],s.forEach(function(n){var i=function(){var t=Array.prototype[n].apply(this,arguments);return this._ractive.setting=!0,e(this),this._ractive.setting=!1,t};t(r,n,{value:i})}),o={},o.__proto__?(n=function(t){t.__proto__=r},i=function(t){delete t._ractive,t.__proto__=Array.prototype}):(n=function(e){var n,i;for(n=s.length;n--;)i=s[n],t(e,i,{value:r[i]})},i=function(t){var e;for(e=s.length;e--;)delete t[s[e]];delete t._ractive})}(),function(t,e){var n,i;i=function(t,n){var i,r;if(e[t])return e[t];for(r=[];n--;)r[n]="_"+n;return i=Function(r.join(","),"return("+t+")"),e[t]=i,i},g=function(t,e,i,r,o){var s;if(this.root=t,this.mustache=e,this.priority=e.priority,this.str=o.s,this.keypaths=[],this.override=[],this.values=[],o.r){for(this.resolvers=[],this.unresolved=this.numRefs=s=o.r.length;s--;)r&&r.hasOwnProperty(o.r[s])?(this.values[s]=this.override[s]=r[o.r[s]],this.unresolved-=1):this.resolvers[this.resolvers.length]=new n(t,o.r[s],i,s,this);1>=this.resolvers.length&&(this.selfUpdating=!0),this.ready=!0,this.redundant&&this.teardown(),this.unresolved||this.resolved||this.init()}else this.init()},g.prototype={init:function(){var t,e=this;this.resolved=!0,this.keypath="("+this.str.replace(/❖([0-9]+)/g,function(t,n){return e.override.hasOwnProperty(n)?e.override[n]:e.keypaths[n]})+")",-1===this.root._expressions.indexOf(this.keypath)?(t=this.str.replace(/❖([0-9]+)/g,function(t,e){return"_"+e}),this.fn=i(t,this.numRefs||0),this.update(),this.root._expressions.push(this.keypath)):this.ready?this.teardown():this.redundant=!0,this.mustache.resolve(this.keypath)},teardown:function(){if(this.resolvers)for(;this.resolvers.length;)this.resolvers.pop().teardown()},resolve:function(t,e,n){this.keypaths[e]=n,this.unresolved-=1,this.unresolved||this.init()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.resolved&&(this.root._def[this.root._def.length]=this,this.deferred=!0)},update:function(){var t;if(!this.resolved)return this;try{t=this.getter()}catch(e){if(this.root.debug)throw e;t=void 0}return d(t,this._lastValue)||(D(this.root,this.keypath),this.root._cache[this.keypath]=t,z(this.root,this.keypath),this._lastValue=t),this},getter:function(){return this.fn.apply(null,this.values)}},n=function(t,e,n,i,r){var o;this.ref=e,this.root=t,this.evaluator=r,this.priority=r.priority,this.argNum=i,o=Y(t,e,n),o?this.resolve(o):(this.contextStack=n,t._pendingResolution[t._pendingResolution.length]=this)},n.prototype={teardown:function(){q(this)},resolve:function(t){this.keypath=t,U(this.root,t,this,this.priority),this.update(),this.evaluator.resolve(this.ref,this.argNum,t)},update:function(){var t=this.root.get(this.keypath);d(t,this._lastValue)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this._lastValue=t)}}}({},{}),b=function(t,e){var n,i,r,o,s;if(t.owner=e.owner,t.owner.type===T&&(t.index=e.index),t.owner.parentFragment&&(o=t.owner.parentFragment.indexRefs)){t.indexRefs={};for(s in o)o.hasOwnProperty(s)&&(t.indexRefs[s]=o[s])}for(e.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[e.indexRef]=e.index),t.items=[],r={root:e.root,parentFragment:t,parentNode:e.parentNode,contextStack:e.contextStack},n=e.descriptor?e.descriptor.length:0,i=0;n>i;i+=1)r.descriptor=e.descriptor[i],r.index=i,t.items[t.items.length]=t.createItem(r)},v=function(t,e){var n,i;t.root=e.root,t.descriptor=e.descriptor,t.parentFragment=e.parentFragment,t.contextStack=e.contextStack||[],t.index=e.index||0,t.priority=e.descriptor.p||0,(e.parentNode||e.anchor)&&(t.parentNode=e.parentNode,t.anchor=e.anchor),t.type=e.descriptor.t,e.descriptor.r&&(t.parentFragment.indexRefs&&t.parentFragment.indexRefs.hasOwnProperty(e.descriptor.r)?(i=t.parentFragment.indexRefs[e.descriptor.r],t.render(i)):(n=Y(t.root,e.descriptor.r,t.contextStack),n?t.resolve(n):(t.ref=e.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),e.descriptor.x&&(t.evaluator=new g(t.root,t,t.contextStack,t.parentFragment.indexRefs,e.descriptor.x))},y=function(){var t;t=this.root.get(this.keypath,!0),d(t,this._lastValue)||(this.render(t),this._lastValue=t)},w=function(t){this.keypath=t,U(this.root,t,this,this.priority),this.update()},x=function(){var t,e;for(t=[],e=this.refs.length;e--;)t[e]=this.root.get(this.refs[e]);return this.evaluator.apply(null,t)},_=function(t,e){var n,i,r,o,s;if(n={descriptor:t.descriptor.f,root:t.root,parentNode:t.parentNode,owner:t},i=h(e),i&&0===e.length&&(r=!0),t.descriptor.n){if(e&&!r)t.length&&(t.teardownFragments(),t.length=0);else if(!t.length)return n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),t.length=1,void 0}else if(i){if(e.length<t.length)for(s=t.fragments.splice(e.length,t.length-e.length);s.length;)s.pop().teardown(!0);else if(e.length>t.length)for(o=t.length;e.length>o;o+=1)n.contextStack=t.contextStack.concat(t.keypath+"."+o),n.index=o,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[o]=t.createFragment(n);t.length=e.length}else u(e)?t.length||(n.contextStack=t.contextStack.concat(t.keypath),n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):e&&!r?t.length||(n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):t.length&&(t.teardownFragments(),t.length=0)},function(){var t,n,i,r,o,s,a,h,u,p;i={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},n="undefined"!=typeof window?window.document:null,t=function(t,e){var i,r=[];for(i=n.createElement("div"),i.innerHTML=t;i.firstChild;)r[r.length]=i.firstChild,e.appendChild(i.firstChild);return r},l=function(e){return this.docFrag=n.createDocumentFragment(),"string"==typeof e.descriptor?(this.nodes=t(e.descriptor,this.docFrag),void 0):(b(this,e),void 0)},l.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new r(t,this.docFrag);switch(t.descriptor.t){case C:return new h(t,this.docFrag);case T:return new p(t,this.docFrag);case R:return new u(t,this.docFrag);case V:return new o(t,this.docFrag);case j:return new s(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(t){var e;if(t&&this.nodes)for(;this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);else for(;this.items.length;)this.items.pop().teardown(t)},firstNode:function(){return this.items[0]?this.items[0].firstNode():null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():null}},s=function(t,e){this.parentFragment=t.parentFragment,this.fragment=new l({descriptor:t.root.partials[t.descriptor.r]||[],root:t.root,parentNode:t.parentNode,contextStack:t.contextStack,owner:this}),e.appendChild(this.fragment.docFrag)},s.prototype={teardown:function(t){this.fragment.teardown(t)}},r=function(t,e){this.node=n.createTextNode(t.descriptor),this.root=t.root,this.parentNode=t.parentNode,e.appendChild(this.node)},r.prototype={teardown:function(t){t&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},o=function(t,i){var r,o,s,h,u,p,d,c,f,g,m,v;if(r=this.descriptor=t.descriptor,this.root=g=t.root,this.parentFragment=t.parentFragment,this.parentNode=t.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],r.a&&r.a.xmlns){if(o=r.a.xmlns,"string"!=typeof o)throw Error("Namespace attribute cannot contain mustaches")}else o=this.parentNode.namespaceURI;if(this.node=n.createElementNS(o,r.e),r.f&&("string"==typeof r.f&&this.node.namespaceURI===I.html?this.node.innerHTML=r.f:(this.fragment=new l({descriptor:r.f,root:g,parentNode:this.node,contextStack:t.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),r.v)for(s in r.v)r.v.hasOwnProperty(s)&&this.addEventProxy(s,r.v[s],t.contextStack);this.attributes=[],c=[];for(u in r.a)r.a.hasOwnProperty(u)&&(d=r.a[u],p=u.toLowerCase(),"intro"===p||"outro"===p?this[p]=d:(h=new a({element:this,name:u,value:void 0===d?null:d,root:g,parentNode:this.node,contextStack:t.contextStack}),this.attributes[this.attributes.length]=h,h.isBindable&&c.push(h),h.isTwowayNameAttr?f=h:h.update()));for(;c.length;)c.pop().bind(this.root.lazy);f&&(f.updateViewModel(),f.update()),i.appendChild(this.node),this.intro&&(v=g.transitions[this.intro]||e.transitions[this.intro],v&&(m=g._transitionManager,m&&m.push(),v.call(g,this.node,m?m.pop:L)))},o.prototype={addEventProxy:function(t,n,i){var r,o,s,a,h=this,u=this.root;"string"==typeof n?(u._proxies[n]||(u._proxies[n]=function(t){u.fire(n,t,this)}),a=u._proxies[n]):(s=new f({descriptor:n,root:this.root,owner:this,contextStack:i}),a=function(t){u.fire(""+s,t,h.node)}),(r=e.eventDefinitions[t])?(o=r(this.node,a),this.customEventListeners[this.customEventListeners.length]=o):void 0!==this.node["on"+t]?(this.eventListeners[this.eventListeners.length]={n:t,h:a},this.node.addEventListener(t,a)):console&&console.warn&&console.warn("Invalid event handler ("+t+")")},teardown:function(t){var n,i,r=this;for(r.fragment&&r.fragment.teardown(!1);r.attributes.length;)r.attributes.pop().teardown();for(;r.eventListeners.length;)listener=r.eventListeners.pop(),r.node.removeEventListener(listener.n,listener.h);for(;r.customEventListeners.length;)r.customEventListeners.pop().teardown();this.outro?(i=this.root.transitions[this.outro]||e.transitions[this.outro],i&&(n=this.root._transitionManager,n&&n.push(),i.call(this.root,this.node,function(){t&&r.parentNode.removeChild(r.node),n&&n.pop()}))):t&&r.parentNode.removeChild(r.node)},firstNode:function(){return this.node},bubble:function(){}},a=function(t){var e,n,r,o,s,a,h,u,p,d,c;if(e=t.name,n=t.value,r=e.indexOf(":"),-1!==r&&(o=e.substr(0,r),"xmlns"!==o&&(e=e.substring(r+1),this.namespace=I[o],!this.namespace)))throw'Unknown namespace ("'+o+'")';if(null===n||"string"==typeof n)return this.namespace?t.parentNode.setAttributeNS(this.namespace,e,n):t.parentNode.setAttribute(e,n),"id"===e.toLowerCase()&&(t.root.nodes[n]=t.parentNode),this.name=e,this.value=n,void 0;for(this.root=t.root,this.element=t.element,this.parentNode=t.parentNode,this.name=e,this.lcName=e.toLowerCase(),this.namespace||t.parentNode.namespaceURI!==I.html||(h=this.lcName,u=i[h]||h,void 0!==t.parentNode[u]&&(this.propertyName=u),("boolean"==typeof t.parentNode[u]||"value"===u)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new f({descriptor:n,root:this.root,owner:this,contextStack:t.contextStack}),this.selfUpdating=!0,p=this.fragment.items.length;p--;)if(d=this.fragment.items[p],d.type!==P){if(d.type!==C){this.selfUpdating=!1;break}if(c){this.selfUpdating=!1;break}c=!0}this.root.twoway&&(s=this.element.descriptor.e.toLowerCase(),a=!("name"!==u&&"value"!==u&&"checked"!==u||"input"!==s&&"textarea"!==s&&"select"!==s)),a&&(this.isBindable=!0,"name"===u&&(this.isTwowayNameAttr=!0)),this.ready=!0},a.prototype={bind:function(t){var e,n,i,r,o,s=this,a=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==C)throw"Not a valid two-way data binding candidate - must be a single interpolator";if(this.interpolator=this.fragment.items[0],e=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===a.tagName&&"value"===this.propertyName)for(n=a.getElementsByTagName("option"),o=n.length,r=0;o>r;r+=1)if(i=n[r],i.hasAttribute("selected")){this.root.set(e,i.value);break}"checkbox"===a.type||"radio"===a.type?"name"===this.propertyName?(a.name="{{"+e+"}}",this.updateViewModel=function(){a.checked&&s.root.set(e,a.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){s.root.set(e,a.checked)}):this.updateViewModel=function(){var t;t=a.value,"0"===t?t=0:""!==t&&(t=+t||t),s.root.set(e,t)},this.updateViewModel&&(this.twoway=!0,a.addEventListener("change",this.updateViewModel),a.addEventListener("click",this.updateViewModel),a.addEventListener("blur",this.updateViewModel),t||(a.addEventListener("keyup",this.updateViewModel),a.addEventListener("keydown",this.updateViewModel),a.addEventListener("keypress",this.updateViewModel),a.addEventListener("input",this.updateViewModel)))},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._def[this.root._def.length]=this,this.deferred=!0)},update:function(){var t,e;if(!this.ready)return this;if("id"===this.lcName&&(void 0!==this.id&&delete this.root.nodes[this.id],this.root.nodes[this.id]=this.parentNode),this.twoway){if(e=this.lcName,this.value=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=this.value===this.parentNode.value?!0:!1,this;if(n.activeElement===this.parentNode)return this}if(t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=t,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this;this.parentNode.setAttribute(this.name,t),this.value=t}return this}},h=function(t,e){this.node=n.createTextNode(""),e.appendChild(this.node),v(this,t),this.cond&&!this.keypath&&this.update(!1)},h.prototype={update:y,resolve:w,evaluate:x,teardown:function(t){q(this),t&&this.parentNode.removeChild(this.node)},render:function(t){this.node.data=t},firstNode:function(){return this.node}},u=function(t,e){this.nodes=[],this.docFrag=n.createDocumentFragment(),this.initialising=!0,v(this,t),e.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:y,resolve:w,evaluate:x,teardown:function(t){if(t)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());q(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());this.nodes=t(e,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}},p=function(t,e){this.fragments=[],this.length=0,this.docFrag=n.createDocumentFragment(),this.initialising=!0,v(this,t),e.appendChild(this.docFrag),this.initialising=!1},p.prototype={update:y,resolve:w,evaluate:x,teardown:function(t){this.teardownFragments(t),q(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(;this.fragments.length;)this.fragments.shift().teardown(t)},render:function(t){_(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var e=new l(t);return this.docFrag.appendChild(e.docFrag),e}}}(),function(){var t,e,n,i;r=function r(t){b(this,t)},r.prototype={createItem:function(r){if("string"==typeof r.descriptor)return new t(r.descriptor);
switch(r.descriptor.t){case C:return new e(r);case R:return new n(r);case T:return new i(r);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.value=this.getValue(),this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===C&&(t=this.items[0].value,void 0!==t)?t:""+this},toString:function(){return this.items.join("")}},t=function(t){this.text=t},t.prototype={toString:function(){return this.text},teardown:function(){}},e=function(t){v(this,t),this.cond&&!this.keypath&&this.update(!1)},e.prototype={update:y,resolve:w,evaluate:x,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){q(this)},toString:function(){return void 0===this.value?"":this.value}},n=e,i=function(t){this.fragments=[],this.length=0,v(this,t)},i.prototype={update:y,resolve:w,evaluate:x,teardown:function(){this.teardownFragments(),q(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){_(this,t),this.parentFragment.bubble()},createFragment:function(t){return new r(t)},toString:function(){return this.fragments.join("")}}}();var G=function(t){var e;return e={active:0,push:function(){e.active+=1},pop:function(){e.active-=1,!e.active&&e.ready&&t()}}};a=function(t){var e,n,i,r,o;if(A[t])return A[t].concat();for(i=[],r=t,n=0;r.length;){if(e=r.indexOf(".",n),-1===e)o=r,r="";else{if("\\"===r.charAt(e-1)&&"\\"!==r.charAt(e-2)){n=e+1;continue}o=r.substr(0,e),n=0}/\[/.test(o)?i=i.concat(o.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=o,r=r.substring(e+1)}return A[t]=i,i.concat()},h=function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},p=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},u=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t},c=function(t){var e,n;if("undefined"!=typeof window){if(n=window.document,!t)throw Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=n.getElementById(t),!e&&n.querySelector&&(e=n.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw Error("Could not find container element")}},e.prototype=F,e.adaptors=O,e.eventDefinitions=M,e.easing=n,e.extend=i,e.interpolate=r,e.interpolators=o,e.parse=parse,e.transitions=s,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e}(this);