(function(t){"use strict";var e,n,i,r,s,o,a,h,u,p,l,c,f,d,g,m,v,y,w,x,b,k,_,N,E,F,O,M,A,L,S,R=t.document||null,C={},T={},P={},j=function(){},I={},V=/^\s+/,q=/\s+$/,B="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",U=1,z=2,D=3,$=4,Z=5,J=6,H=7,Y=8,G=9,X=10,W=11,K=12,Q=20,te=21,ee=22,ne=23,ie=24,re=26,se=30,oe=31,ae=32,he=33,ue=34,pe=35,le=36,ce=40,fe={},de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),d=Object.defineProperty,g=Object.defineProperties}catch(ge){d=function(t,e,n){t[e]=n.value},g=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&d(t,n,e[n])}}try{Object.create(null),m=function(){return Object.create(null)}}catch(ge){m=function(){return{}}}C.animate=function(t,n,i){var r,s,o,h,u;for(i=i||{},h=F.animations.length;h--;)F.animations[h].keypath===t&&F.animations[h].stop();return i.easing&&(r="function"==typeof i.easing?i.easing:this.easing&&this.easing[i.easing]?this.easing[i.easing]:e.easing[i.easing],"function"!=typeof r&&(r=null)),s=void 0===i.duration?400:i.duration,u=a(t),o=new x({keys:u,from:this.get(u),to:n,root:this,duration:s,easing:r,step:i.step,complete:i.complete}),F.push(o),{stop:function(){o.stop()}}},C.bind=function(t){var e=this._bound;-1===e.indexOf(t)&&(e[e.length]=t,t.init(this))},C.fire=function(t){var e,n,i,r=this._subs[t];if(r)for(e=Array.prototype.slice.call(arguments,1),n=0,i=r.length;i>n;n+=1)r[n].apply(this,e)},C.get=function(t){var e,n,i,r,s,o,h,p;if(!t)return this.data;if(e=this._cache,u(t))i=t.slice(),r=i.join(".");else{if(e.hasOwnProperty(t)&&e[t]!==fe)return e[t];i=a(t),r=i.join(".")}return e.hasOwnProperty(r)&&e[r]!==fe?e[r]:this._evaluators[r]?(p=this._evaluators[r].value,e[r]=p,p):(s=i.pop(),o=i.join("."),h=i.length?this.get(i):this.data,null!==h&&"object"==typeof h&&h!==fe?((n=this._cacheMap[o])?-1===n.indexOf(r)&&(n[n.length]=r):this._cacheMap[o]=[r],p=h[s],this.modifyArrays&&("("===r.charAt(0)||!u(p)||p._ractive&&p._ractive.setting||O(p,r,this)),e[r]=p,p):void 0)};var me,ve,ye,we,xe,be,ke;me=function(t){if(t.keypath)we(t);else{var e=t.root._pendingResolution.indexOf(t);-1!==e&&t.root._pendingResolution.splice(e,1)}},ve=function(t,e){var n,i;if(t.modifyArrays&&"("!==e.charAt(0)&&(n=t._cache[e],u(n)&&!n._ractive.setting&&M(n,e,t)),t._cache[e]=fe,i=t._cacheMap[e])for(;i.length;)ve(t,i.pop())},ye=function(t){var e,n,i,r,s,o,h,u;for(o=t.root,h=t.keypath,u=t.priority,o._deps[u]||(o._deps[u]={}),e=o._deps[u],e[h]||(e[h]=[]),n=e[h],n[n.length]=t,o._evaluators[h]&&(o._evaluators[h].deps+=1),i=a(h);i.length;)i.pop(),r=i.join("."),o._depsMap[r]||(o._depsMap[r]=[]),s=o._depsMap[r],s.hasOwnProperty(h)||(s[h]=0,s[s.length]=h),s[h]+=1,h=r},we=function(t){var e,n,i,r,s,o,h,u;for(o=t.root,h=t.keypath,u=t.priority,e=o._deps[u][h],e.splice(e.indexOf(t),1),(s=o._evaluators[h])&&(s.deps-=1,s.deps||s.teardown()),n=a(h);n.length;)n.pop(),i=n.join("."),r=o._depsMap[i],r[h]-=1,r[h]||r.splice(r.indexOf(h),1),h=i},xe=function(t,e,n){var i;for(i=0;t._deps.length>i;i+=1)_e(t,e,i,n)};var _e=function(t,e,n,i){var r,s,o,a;if(r=t._deps[n]){if(s=r[e])for(o=s.length;o--;)s[o].update();if(!i&&(a=t._depsMap[e]))for(o=a.length;o--;)_e(t,a[o],n)}},Ne=function(t,e,n){var i,r,s,o;for(o=e.length,r=0;t._deps.length>r;r+=1)for(i=t._deps[r],s=o;s--;)_e(t,e[s],r,n)};be=function(t,e,n){var i,r,s,o,h,u;if("."===e)return n[n.length-1];if("."===e.charAt(0))return n[n.length-1]+e;for(i=a(e),r=i.pop(),n=n.concat();n.length;)if(s=n.pop(),o=a(s),h=t.get(o.concat(i)),"object"==typeof h&&null!==h&&h.hasOwnProperty(r)){u=s+"."+e;break}return u||void 0===t.get(e)||(u=e),u},ke=function(t){for(var e,n;t._defEvals.length;)e=t._defEvals.pop(),e.update().deferred=!1;for(;t._defAttrs.length;)n=t._defAttrs.pop(),n.update().deferred=!1},C.link=function(t){var e=this;return function(n){e.set(t,n)}},function(t){var e;t.observe=function(t,n,i){var r,s=[];if("object"==typeof t){i=n;for(r in t)t.hasOwnProperty(r)&&(n=t[r],s[s.length]=e(this,r,n,i));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}return e(this,t,n,i)},e=function(t,e,n,i){var r,s,o;return i=i||{},o=i.context||t,r={update:function(){var i;if(i=t.get(e,!0),!c(i,s)){try{n.call(o,i,s)}catch(r){if(t.debug)throw r}s=i}},keypath:e,root:t,priority:0},i.init!==!1&&r.update(),ye(r),{cancel:function(){we(r)}}}}(C),C.off=function(t,e){var n,i;e||(t?this._subs[t]=[]:this._subs={}),n=this._subs[t],n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1))},C.on=function(t,e){var n,i,r=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&(n[n.length]=this.on(i,t[i]));return{cancel:function(){for(;n.length;)n.pop().cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){r.off(t,e)}}},C.render=function(t){var e,n;if(e=t.el?f(t.el):this.el,!e)throw Error("You must specify a DOM element to render to");t.append||(e.innerHTML=""),this._transitionManager=n=Ae(t.complete),this.fragment=new v({descriptor:this.template,root:this,owner:this,parentNode:e}),e.appendChild(this.fragment.docFrag),this.ready=!0,this._transitionManager=null,n.ready=!0,t.complete&&!n.active&&t.complete.call(this)},function(t){var e,n;t.set=function(t,i,r){var s,o,h,u,l,c;if(o=[""],s=[],p(t)&&(r=i),this._transitionManager=c=Ae(r),p(t))for(h in t)t.hasOwnProperty(h)&&(l=a(h),u=l.join("."),i=t[h],e(this,u,l,i,s,o));else l=a(t),u=l.join("."),e(this,u,l,i,s,o);return s.length&&n(this),o.length&&Ne(this,o,!0),s.length&&Ne(this,s),ke(this),this._transitionManager=null,c.ready=!0,r&&!c.active&&r.call(this),this.setting||(this.setting=!0,"object"==typeof t?this.fire("set",t):this.fire("set",t,i),this.setting=!1),this},e=function(t,e,n,i,r,s){var o,a,h,u;if(u=n.slice(),o=t.get(e),o!==i){for(h=t.data;n.length>1;)a=n.shift(),h[a]||(h[a]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),h=h[a];a=n[0],h[a]=i}else if("object"!=typeof i)return;for(ve(t,e),r[r.length]=e;u.length>1;)u.pop(),e=u.join("."),-1===s.indexOf(e)&&(s[s.length]=e)},n=function(t){var e,n,i;for(e=t._pendingResolution.length;e--;)n=t._pendingResolution.splice(e,1)[0],(i=be(t,n.ref,n.contextStack))?n.resolve(i):t._pendingResolution[t._pendingResolution.length]=n}}(C),C.teardown=function(t){var e,n;this.fire("teardown"),this._transitionManager=n=Ae(t),this.fragment.teardown(!0);for(e in this._cache)ve(this,e);for(;this._bound.length;)this.unbind(this._bound.pop());this._transitionManager=null,n.ready=!0,t&&!n.active&&t.call(this)},C.unbind=function(t){var e,n=this._bound;e=n.indexOf(t),-1!==e&&(n.splice(e,1),t.teardown(this))},C.update=function(t,e){var n;return"function"==typeof t&&(e=t),this._transitionManager=n=Ae(e),ve(this,t||""),xe(this,t||""),ke(this),this._transitionManager=null,n.ready=!0,e&&!n.active&&e.call(this),"string"==typeof t?this.fire("update",t):this.fire("update"),this},T.backbone=function(t,e){var n,i,r,s,o,a,h;return e&&(e+=".",o=RegExp("^"+e.replace(/\./g,"\\.")),a=e.length),{init:function(u){e?(h=function(t){var n,i;i={};for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i},s=function(t){n||(i=!0,u.set(h(t.changed)),i=!1)},r=function(e,r){i||o.test(e)&&(n=!0,t.set(e.substring(a),r),n=!1)}):(s=function(t){n||(i=!0,u.set(t.changed),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)}),t.on("change",s),u.on("set",r),u.set(e?h(t.attributes):t.attributes)},teardown:function(e){t.off("change",s),e.off("set",r)}}},T.statesman=function(t,e){var n,i,r,s;return e=e?e+".":"",{init:function(e){s=function(t,r){n||(i=!0,e.set(t,r),i=!1)},r=function(e,r){i||(n=!0,t.set(e,r),n=!1)},t.on("set",s),e.on("set",r),e.set(t.get())},teardown:function(e){t.off("change",s),e.off("set",r)}}},n={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},P.tap=function(t,e){var n,i,r,s;return r=5,s=400,n=function(t){var n,i,o,a,h,u;i=t.clientX,o=t.clientY,n=this,a=function(t){e.call(n,t),u()},h=function(t){(Math.abs(t.clientX-i)>=r||Math.abs(t.clientY-o)>=r)&&u()},u=function(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",a)},window.addEventListener("mousemove",h),window.addEventListener("mouseup",a),setTimeout(u,s)},t.addEventListener("mousedown",n),i=function(t){var n,i,o,a,h,u,p,l;1===t.touches.length&&(a=t.touches[0],i=a.clientX,o=a.clientY,n=this,h=a.identifier,p=function(t){var i;i=t.changedTouches[0],i.identifier!==h&&l(),t.preventDefault(),e.call(n,t),l()},u=function(t){var e;(1!==t.touches.length||t.touches[0].identifier!==h)&&l(),e=t.touches[0],(Math.abs(e.clientX-i)>=r||Math.abs(e.clientY-o)>=r)&&l()},l=function(){window.removeEventListener("touchmove",u),window.removeEventListener("touchend",p),window.removeEventListener("touchcancel",l)},window.addEventListener("touchmove",u),window.addEventListener("touchend",p),window.addEventListener("touchcancel",l),setTimeout(l,s))},t.addEventListener("touchstart",i),{teardown:function(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",i)}}};var Ee=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])};i=function(t){var n,i,r,s,o,a,h,u;if(n=this,s=["el","preserveWhitespace","append","twoway","modifyArrays"],o=s.concat("data","template","partials","transitions"),t.template)if("string"==typeof t.template){if(!e.parse)throw Error(B);a=e.parse(t.template)}else a=t.template;if(t.partials){h={};for(r in t.partials)if(t.partials.hasOwnProperty(r)){if("string"==typeof t.partials[r]){if(!e.parse)throw Error(B);u=e.parse(t.partials[r],t)}else u=t.partials[r];h[r]=u}}i=function(n){var i,r;for(!n.template&&a&&(n.template=a),n.data||(n.data={}),Ee(n.data,t.data),n.transitions||(n.transitions={}),Ee(n.transitions,t.transitions),h&&(n.partials||(n.partials={}),Ee(n.partials,h)),i=s.length;i--;)r=s[i],!n.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(n[r]=t[r]);e.call(this,n),this.init&&this.init.call(this,n)};for(r in n.prototype)n.prototype.hasOwnProperty(r)&&(i.prototype[r]=n.prototype[r]);for(r in t)if(t.hasOwnProperty(r)&&-1===o.indexOf(r)){if(e.prototype.hasOwnProperty(r))throw Error('Cannot override "'+r+'" method or property of Ractive prototype');i.prototype[r]=t[r]}return i.extend=n.extend,i},r=function(t,n){return l(t)&&l(n)?e.interpolators.number(+t,+n):u(t)&&u(n)?e.interpolators.array(t,n):p(t)&&p(n)?e.interpolators.object(t,n):function(){return n}},s={number:function(t,e){var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,n){var i,r,s,o;for(i=[],r=[],o=s=Math.min(t.length,n.length);o--;)r[o]=e.interpolate(t[o],n[o]);for(o=s;t.length>o;o+=1)i[o]=t[o];for(o=s;n.length>o;o+=1)i[o]=n[o];return function(t){for(var e=s;e--;)i[e]=r[e](t);return i}},object:function(t,n){var i,r,s,o,a=[];s={},r={};for(o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)?(a[a.length]=o,r[o]=e.interpolate(t[o],n[o])):s[o]=t[o]);for(o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(s[o]=n[o]);return i=a.length,function(t){for(var e,n=i;n--;)e=a[n],s[e]=r[e](t);return s}}};var Fe=m();g(Fe,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}}}),e=function(t){var n,i,r,s,o,a;for(n in Fe)t.hasOwnProperty(n)||(t[n]=Fe[n]);if(g(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"==t?e:8|3&e,n.toString(16)})},_subs:{value:m()},_cache:{value:{}},_cacheMap:{value:m()},_deps:{value:[]},_depsMap:{value:m()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_proxies:{value:{}},_evaluators:{value:{}},_bound:{value:[]},_transitionManager:{value:null,writable:!0},nodes:{value:{}}}),this.modifyArrays=t.modifyArrays,this.twoway=t.twoway,this.lazy=t.lazy,this.debug=t.debug,this.el=f(t.el),this.data=t.data||{},this.partials={},this.transitions=t.transitions,t.bindings)if(u(t.bindings))for(r=0;t.bindings.length>r;r+=1)this.bind(t.bindings[r]);else this.bind(t.bindings);if(s=t.template,"string"==typeof s){if(!e.parse)throw Error(B);if("#"===s.charAt(0)){if(o=R.getElementById(s.substring(1)),!o)throw Error("Could not find template element ("+s+")");a=e.parse(o.innerHTML,t)}else a=e.parse(s,t)}else a=s;if(p(a)&&(this.partials=a.partials,a=a.template),a&&1===a.length&&"string"==typeof a[0]&&(a=a[0]),this.template=a,t.partials)for(n in t.partials)if(t.partials.hasOwnProperty(n)){if(i=t.partials[n],"string"==typeof i){if(!e.parse)throw Error(B);i=e.parse(i,t)}this.partials[n]=i}for(n in this.partials)this.partials.hasOwnProperty(n)&&1===this.partials[n].length&&"string"==typeof this.partials[n][0]&&(this.partials[n]=this.partials[n][0]);this.el&&this.render({el:this.el,append:t.append,complete:t.complete})},function(){var t,e,i,r,s,a;R&&(r=R.createElement("div"),void 0!==r.style.transition?(e="transition",i="transitionend",t=!0):void 0!==r.style.webkitTransition?(e="webkitTransition",i="webkitTransitionEnd",t=!0):t=!1,s=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},a=t?function(t){return function(r,o){var a,h,u;u=t.duration||400,n=s(t.easing||"linear"),h=r.style[e],r.style[t.property]=t.from,setTimeout(function(){r.style[e]=u/1e3+"s "+t.property+" "+n,a=function(){r.removeEventListener(i,a),r.style.transition=h,o()},r.addEventListener(i,a),r.style[t.property]=t.to},0)}}:function(){return function(t,e){e()}},o={fadeIn:a({property:"opacity",from:.01,to:1,duration:300,easing:"linear"}),fadeOut:a({property:"opacity",from:1,to:.01,duration:300,easing:"linear"}),staggeredFadeIn:function(t,e,n,i){var r,s;n&&(s=n.stagger),void 0===s&&(s=20),r=i*s,t.style.opacity=0,setTimeout(function(){o.fadeIn(t,e)},r)},staggeredFadeOut:function(t,e,n,i){var r,s;n&&(s=n.stagger),void 0===s&&(s=20),r=i*s,setTimeout(function(){o.fadeOut(t,e)},r)}})}(),x=function(t){var n;this.startTime=Date.now();for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.interpolator=e.interpolate(this.from,this.to),this.running=!0},x.prototype={tick:function(){var t,e,n,i;return this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(this.root.set(this.keys,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,n=this.interpolator(e),this.root.set(this.keys,n),this.step&&this.step(e,n),!0)):!1},stop:function(){this.running=!1}},F={animations:[],tick:function(){var e,n;for(e=0;this.animations.length>e;e+=1)n=this.animations[e],n.tick()||this.animations.splice(e--,1);this.animations.length?t.requestAnimationFrame(this.boundTick):this.running=!1},boundTick:function(){F.tick()},push:function(t){this.animations[this.animations.length]=t,this.running||(this.running=!0,this.tick())}},function(t,e,n){var i;for(i=0;t.length>i&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[i]+"CancelAnimationFrame"]||n[t[i]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var i,r,s;return i=Date.now(),r=Math.max(0,16-(i-e)),s=n.setTimeout(function(){t(i+r)},r),e=i+r,s}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){n.clearTimeout(t)})}(["ms","moz","webkit","o"],0,t),function(){var t,e,n,i,r,s;O=function(t,n,i){var r,s,o;t._ractive?(r=t._ractive.roots,s=t._ractive.keypathsByGuid,s[i._guid]||(r[r.length]=i,s[i._guid]=[]),o=s[i._guid],-1===o.indexOf(n)&&(o[o.length]=n)):(d(t,"_ractive",{value:{roots:[i],keypathsByGuid:{}},configurable:!0}),t._ractive.keypathsByGuid[i._guid]=[n],e(t))},M=function(t,e,i){var r,s,o,a;if(!t._ractive)throw Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");if(r=t._ractive.roots,s=t._ractive.keypathsByGuid,!s[i._guid])throw Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");if(o=s[i._guid],a=o.indexOf(e),-1===a)throw Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");o.splice(a,1),o.length||(r.splice(r.indexOf(i),1),s[i._guid]=null),r.length||n(t)},t=function(t,e,n){var i,r,s,o,h,u;u=t._ractive.keypathsByGuid,i=function(t){for(var e=t.length;e--;)r(t[e])},r=function(t){t._transitionManager=Ae(j),s(t,u[t._guid]),t._transitionManager=null},s=function(t,e){for(var n=e.length;n--;)o(t,e[n])},o=function(t,i){var r,s,o,u,p,l,c;for(u=[],ve(t,i),o=a(i);o.length;)o.pop(),u[u.length]=o.join(".");for(u[u.length]=i+".length",Ne(t,u,!0),p=[],l=[],c=0;t._deps.length>c;c+=1)if(r=t._deps[c],r&&(s=r[i])){for(h(t,i,s,p,l),ke(t);p.length;)p.pop().smartUpdate(e,n);for(;l.length;)l.pop().update()}ke(t)},h=function(t,e,n,i,r){var s,o;for(s=n.length;s--;)o=n[s],o.type===se?o.update():o.keypath===e&&o.type===$?i[i.length]=o:r=o},i(t._ractive.roots)},i=[],s=["pop","push","reverse","shift","sort","splice","unshift"],s.forEach(function(e){var n=function(){var n=Array.prototype[e].apply(this,arguments);return this._ractive.setting=!0,t(this,e,arguments),this._ractive.setting=!1,n};d(i,e,{value:n})}),r={},r.__proto__?(e=function(t){t.__proto__=i},n=function(t){delete t._ractive,t.__proto__=Array.prototype}):(e=function(t){var e,n;for(e=s.length;e--;)n=s[e],d(t,n,{value:i[n]})},n=function(t){var e;for(e=s.length;e--;)delete t[s[e]];delete t._ractive})}(),function(t){var e,n;w=function(t,i,r,s,o){var a,h;for(this.root=t,this.keypath=i,this.fn=n(r,s.length),this.values=[],this.refs=[],this.deps=0,a=s.length;a--;)h=s[a],h[0]?this.values[a]=h[1]:this.refs[this.refs.length]=new e(t,h[1],this,a,o);this.selfUpdating=1>=this.refs.length,this.update()},w.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var t;try{t=this.fn.apply(null,this.values)}catch(e){if(this.root.debug)throw e;t=void 0}return c(t,this.value)||(ve(this.root,this.keypath),this.root._cache[this.keypath]=t,xe(this.root,this.keypath),this.value=t),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();ve(this.root,this.keypath),this.root._evaluators[this.keypath]=null}},e=function(t,e,n,i,r){this.evaluator=n,this.keypath=e,this.root=t,this.argNum=i,this.type=se,this.priority=r,this.value=n.values[i]=t.get(e),ye(this)},e.prototype={update:function(){var t=this.root.get(this.keypath);c(t,this.value)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this.value=t)},teardown:function(){we(this)}},n=function(e,n){var i,r;if(e=e.replace(/❖/g,"_"),t[e])return t[e];for(r=[];n--;)r[n]="_"+n;return i=Function(r.join(","),"return("+e+")"),t[e]=i,i}}({});var Oe;(function(){var t,e;Oe=function(e){var n,i,r,s,o;for(this.root=e.root,this.mustache=e,this.numRefs=0,this.args=[],n=e.descriptor.x,o=e.parentFragment.indexRefs,this.str=n.s,r=this.unresolved=n.r?n.r.length:0,r||this.init(),i=0;r>i;i+=1)s=n.r[i],o&&void 0!==o[s]?this.resolveRef(i,!0,o[s].index):(this.numRefs+=1,new t(this,s,e.contextStack,i))},Oe.prototype={init:function(){this.keypath=e(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},resolveRef:function(t,e,n){this.args[t]=[e,n],--this.unresolved||this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]||(this.root._evaluators[this.keypath]=new w(this.root,this.keypath,this.str,this.args,this.mustache.priority))}},t=function(t,e,n,i){var r,s;s=t.root,r=be(s,e,n),r?t.resolveRef(i,!1,r):(this.ref=e,this.argNum=i,this.resolver=t,this.contextStack=n,s._pendingResolution[s._pendingResolution.length]=this)},t.prototype={resolve:function(t){this.resolver.resolveRef(this.argNum,!1,t)}},e=function(t,e){var n;return n=t.replace(/❖([0-9]+)/g,function(t,n){return e[n][1]}),"("+n.replace(/[\.\[\]]/g,"-")+")"}})();var Me=function(t,n){var i,r;if(t.partials&&t.partials[n])return t.partials[n];if(e.partials[n]){if("string"==typeof e.partials[n]){if(!e.parse)throw Error(B);e.partials[n]=e.parse(e.partials[n])}}else if(i=R.getElementById(n),i&&"SCRIPT"===i.tagName){if(!e.parse)throw Error(B);e.partials[n]=e.parse(i.innerHTML)}return r=e.partials[n],r?1===r.length&&"string"==typeof r[0]?r[0]:r:(t.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+n+'"'),[])};N=function(t,e){var n,i,r,s,o;if(t.owner=e.owner,t.root=e.root,t.parentNode=e.parentNode,t.contextStack=e.contextStack||[],t.owner.type===$&&(t.index=e.index),t.owner.parentFragment&&(s=t.owner.parentFragment.indexRefs)){t.indexRefs=m();for(o in s)t.indexRefs[o]=s[o]}for(e.indexRef&&(t.indexRefs||(t.indexRefs={}),t.indexRefs[e.indexRef]={index:e.index,keypath:e.owner.keypath}),t.items=[],r={parentFragment:t},n=e.descriptor?e.descriptor.length:0,i=0;n>i;i+=1)r.descriptor=e.descriptor[i],r.index=i,t.items[t.items.length]=t.createItem(r)},b=function(t,e){var n,i,r;r=t.parentFragment=e.parentFragment,t.root=r.root,t.contextStack=r.contextStack,t.descriptor=e.descriptor,t.index=e.index||0,t.priority=e.descriptor.p||0,r.parentNode&&(t.parentNode=r.parentNode),t.type=e.descriptor.t,e.descriptor.r&&(r.indexRefs&&void 0!==r.indexRefs[e.descriptor.r]?(i=r.indexRefs[e.descriptor.r],t.refIndex=i.index,t.render(t.refIndex)):(n=be(t.root,e.descriptor.r,t.contextStack),n?t.resolve(n):(t.ref=e.descriptor.r,t.root._pendingResolution[t.root._pendingResolution.length]=t,t.descriptor.n&&t.render(!1)))),e.descriptor.x&&new Oe(t)},k=function(){var t;t=this.root.get(this.keypath,!0),c(t,this.value)||(this.render(t),this.value=t)},_=function(t){this.keypath=t,ye(this),this.update()},E=function(t,e){var n,i,r,s,o;if(n={descriptor:t.descriptor.f,root:t.root,parentNode:t.parentNode,owner:t},i=u(e),i&&0===e.length&&(r=!0),t.descriptor.n){if(e&&!r)t.length&&(t.teardownFragments(!0),t.length=0);else if(!t.length)return n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),t.length=1,void 0}else if(i){if(e.length<t.length)for(o=t.fragments.splice(e.length,t.length-e.length);o.length;)o.pop().teardown(!0);else if(e.length>t.length)for(s=t.length;e.length>s;s+=1)n.contextStack=t.contextStack.concat(t.keypath+"."+s),n.index=s,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[s]=t.createFragment(n);t.length=e.length}else p(e)?t.length||(n.contextStack=t.contextStack.concat(t.keypath),n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):e&&!r?t.length||(n.contextStack=t.contextStack,n.index=0,t.fragments[0]=t.createFragment(n),t.length=1):t.length&&(t.teardownFragments(!0),t.length=0)},function(){var t,n,i,r,s,o,a,h,u;n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},t=function(t,e){var n,i=[];for(n=R.createElement("div"),n.innerHTML=t;n.firstChild;)i[i.length]=n.firstChild,e.appendChild(n.firstChild);return i},v=function(e){return this.docFrag=R.createDocumentFragment(),"string"==typeof e.descriptor?(this.nodes=t(e.descriptor,this.docFrag),void 0):(N(this,e),void 0)},v.prototype={createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case z:return new a(t,this.docFrag);case $:return new u(t,this.docFrag);case D:return new h(t,this.docFrag);case H:return new r(t,this.docFrag);case Y:return new s(t,this.docFrag);default:throw"WTF? not sure what happened here..."}},teardown:function(t){var e;if(t&&this.nodes)for(;this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);else if(this.items)for(;this.items.length;)this.items.pop().teardown(t)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():null}},s=function(t,e){var n,i=this.parentFragment=t.parentFragment;this.type=Y,this.name=t.descriptor.r,n=Me(i.root,t.descriptor.r),this.fragment=new v({descriptor:n,root:i.root,parentNode:i.parentNode,contextStack:i.contextStack,owner:this}),e.appendChild(this.fragment.docFrag)},s.prototype={teardown:function(t){this.fragment.teardown(t)}},i=function(t,e){this.type=U,this.node=R.createTextNode(t.descriptor),this.parentNode=t.parentFragment.parentNode,e.appendChild(this.node)},i.prototype={teardown:function(t){t&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node}},r=function(t,n){var i,r,s,a,h,u,p,l,c,f,d,g,m,w,x;if(this.type=H,i=this.parentFragment=t.parentFragment,r=this.descriptor=t.descriptor,this.root=d=i.root,this.parentNode=i.parentNode,this.index=t.index,this.eventListeners=[],this.customEventListeners=[],r.a&&r.a.xmlns){if(s=r.a.xmlns,"string"!=typeof s)throw Error("Namespace attribute cannot contain mustaches")}else s=this.parentNode.namespaceURI;if(this.node=R.createElementNS(s,r.e),r.f&&("string"==typeof r.f&&this.node.namespaceURI===de.html?this.node.innerHTML=r.f:(this.fragment=new v({descriptor:r.f,root:d,parentNode:this.node,contextStack:i.contextStack,owner:this}),this.node.appendChild(this.fragment.docFrag))),r.v)for(a in r.v)r.v.hasOwnProperty(a)&&this.addEventProxy(a,r.v[a],i.contextStack);this.attributes=[],c=[];for(u in r.a)r.a.hasOwnProperty(u)&&(l=r.a[u],p=u.toLowerCase(),"intro"===p||"outro"===p||"intro-params"===p||"outro-params"===p?(p=p.replace("-params","Params"),this[p]="string"==typeof l?l:new y({descriptor:l,root:d,owner:this,contextStack:i.contextStack})):(h=new o({element:this,name:u,value:void 0===l?null:l,root:d,parentNode:this.node,contextStack:i.contextStack}),this.attributes[this.attributes.length]=h,h.isBindable&&c.push(h),h.isTwowayNameAttr?f=h:h.update()));for(;c.length;)c.pop().bind(this.root.lazy);if(f&&(f.updateViewModel(),f.update()),n.appendChild(this.node),this.intro&&(g=""+this.intro,x=d.transitions[g]||e.transitions[g])){if(w=d._transitionManager,w&&w.push(),this.introParams){m=""+this.introParams;try{m=JSON.parse(m)}catch(b){}}x.call(d,this.node,w?w.pop:j,m,w.i,w)}},r.prototype={addEventProxy:function(t,n,i){var r,s,o,a,h=this,u=this.root;"string"==typeof n?(u._proxies[n]||(u._proxies[n]=function(t){u.fire(n,t,this)}),a=u._proxies[n]):(o=new y({descriptor:n,root:this.root,owner:this,contextStack:i}),a=function(t){u.fire(""+o,t,h.node)}),(r=e.eventDefinitions[t])?(s=r(this.node,a),this.customEventListeners[this.customEventListeners.length]=s):void 0!==this.node["on"+t]?(this.eventListeners[this.eventListeners.length]={n:t,h:a},this.node.addEventListener(t,a)):console&&console.warn&&console.warn("Invalid event handler ("+t+")")},teardown:function(t){var n,i,r,s,o,a=this;for(a.fragment&&a.fragment.teardown(!1);a.attributes.length;)a.attributes.pop().teardown();for(;a.eventListeners.length;)s=a.eventListeners.pop(),a.node.removeEventListener(s.n,s.h);for(;a.customEventListeners.length;)a.customEventListeners.pop().teardown();if(this.outro){if(i=""+this.outro,o=this.root.transitions[i]||e.transitions[i]){if(n=this.root._transitionManager,n&&n.push(),this.outroParams){r=""+this.outroParams;try{r=JSON.parse(r)}catch(h){}}o.call(this.root,this.node,function(){t&&a.parentNode.removeChild(a.node),n&&n.pop()},r,n.i,n)}}else t&&a.parentNode.removeChild(a.node)},firstNode:function(){return this.node},bubble:function(){}},o=function(t){var e,i,r,s,o,a,h,u,p,l,c;if(e=t.name,i=t.value,r=e.indexOf(":"),-1!==r&&(s=e.substr(0,r),"xmlns"!==s&&(e=e.substring(r+1),this.namespace=de[s],!this.namespace)))throw'Unknown namespace ("'+s+'")';if(null===i||"string"==typeof i)return this.namespace?t.parentNode.setAttributeNS(this.namespace,e,i):t.parentNode.setAttribute(e,i),"id"===e.toLowerCase()&&(t.root.nodes[i]=t.parentNode),this.name=e,this.value=i,void 0;for(this.root=t.root,this.element=t.element,this.parentNode=t.parentNode,this.name=e,this.lcName=e.toLowerCase(),this.namespace||t.parentNode.namespaceURI!==de.html||(h=this.lcName,u=n[h]||h,void 0!==t.parentNode[u]&&(this.propertyName=u),("boolean"==typeof t.parentNode[u]||"value"===u)&&(this.useProperty=!0)),this.parentFragment=this.element.parentFragment,this.fragment=new y({descriptor:i,root:this.root,owner:this,contextStack:t.contextStack}),this.selfUpdating=!0,p=this.fragment.items.length;p--;)if(l=this.fragment.items[p],l.type!==U){if(l.type!==z){this.selfUpdating=!1;break}if(c){this.selfUpdating=!1;break}c=!0}this.root.twoway&&(o=this.element.descriptor.e.toLowerCase(),a=!("name"!==u&&"value"!==u&&"checked"!==u||"input"!==o&&"textarea"!==o&&"select"!==o)),a&&(this.isBindable=!0,"name"===u&&(this.isTwowayNameAttr=!0)),this.ready=!0},o.prototype={bind:function(t){var e,n,i,r,s=this,o=this.parentNode;if(!this.fragment)return!1;if(1!==this.fragment.items.length||this.fragment.items[0].type!==z||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;if(this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r,"SELECT"===o.tagName&&"value"===this.propertyName)for(e=o.getElementsByTagName("option"),r=e.length,i=0;r>i;i+=1)if(n=e[i],n.hasAttribute("selected")){this.root.set(this.keypath,n.value);break}"checkbox"===o.type||"radio"===o.type?"name"===this.propertyName?(o.name="{{"+this.keypath+"}}",this.updateViewModel=function(){o.checked&&s.root.set(s.keypath,o.value)}):"checked"===this.propertyName&&(this.updateViewModel=function(){s.root.set(s.keypath,o.checked)}):this.updateViewModel=function(){var t;t=o.value,"0"===t?t=0:""!==t&&(t=+t||t),s.root.set(s.keypath,t)},this.updateViewModel&&(this.twoway=!0,o.addEventListener("change",this.updateViewModel),o.addEventListener("click",this.updateViewModel),o.addEventListener("blur",this.updateViewModel),t||(o.addEventListener("keyup",this.updateViewModel),o.addEventListener("keydown",this.updateViewModel),o.addEventListener("keypress",this.updateViewModel),o.addEventListener("input",this.updateViewModel)))},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,"name"===this.propertyName&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){this.updateViewModel&&(this.parentNode.removeEventListener("change",this.updateViewModel),this.parentNode.removeEventListener("click",this.updateViewModel),this.parentNode.removeEventListener("blur",this.updateViewModel),this.parentNode.removeEventListener("keyup",this.updateViewModel),this.parentNode.removeEventListener("keydown",this.updateViewModel),this.parentNode.removeEventListener("keypress",this.updateViewModel),this.parentNode.removeEventListener("input",this.updateViewModel)),this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var t,e;if(!this.ready)return this;if(this.twoway){if(e=this.lcName,t=this.interpolator.value,"name"===e&&("checkbox"===this.parentNode.type||"radio"===this.parentNode.type))return this.parentNode.checked=t===this.parentNode.value?!0:!1,this;if(R.activeElement===this.parentNode)return this}if(t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value){if(this.useProperty)return this.parentNode[this.propertyName]=t,this;if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,t),this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=this.parentNode),this.parentNode.setAttribute(this.name,t),this.value=t
}return this}},a=function(t,e){this.type=z,this.node=R.createTextNode(""),e.appendChild(this.node),b(this,t)},a.prototype={update:k,resolve:_,teardown:function(t){me(this),t&&this.parentNode.removeChild(this.node)},render:function(t){this.node.data=void 0===t?"":t},firstNode:function(){return this.node}},h=function(t,e){this.type=D,this.nodes=[],this.docFrag=R.createDocumentFragment(),this.initialising=!0,b(this,t),e.appendChild(this.docFrag),this.initialising=!1},h.prototype={update:k,resolve:_,teardown:function(t){if(t)for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());me(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){for(;this.nodes.length;)this.parentNode.removeChild(this.nodes.pop());return void 0===e?(this.nodes=[],void 0):(this.nodes=t(e,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),void 0)}},u=function(t,e){this.type=$,this.fragments=[],this.length=0,this.docFrag=R.createDocumentFragment(),this.initialising=!0,b(this,t),e.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:k,resolve:_,smartUpdate:function(t,e){var n;("push"===t||"unshift"===t||"splice"===t)&&(n={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i)),this[t]&&this[t](n,e)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(t,e){var n,i,r;for(n=this.length,i=n+e.length,r=n;i>r;r+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+r),t.index=r,this.fragments[r]=this.createFragment(t);this.length+=e.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(t,e){this.splice(t,[0,0].concat(Array(e.length)))},splice:function(t,e){var n,i,r,s,o,a,h,u,l;if(e.length&&(a=+(0>e[0]?this.length+e[0]:e[0]),i=Math.max(0,e.length-2),r=void 0!==e[1]?e[1]:this.length-a,s=i-r)){if(0>s){for(h=a-s,o=a;h>o;o+=1)this.fragments[o].teardown(!0);this.fragments.splice(a,-s)}else{for(h=a+s,n=this.fragments[a]?this.fragments[a].firstNode():this.parentFragment.findNextNode(this),u=[a,0].concat(Array(s)),this.fragments.splice.apply(this.fragments,u),o=a;h>o;o+=1)t.contextStack=this.contextStack.concat(this.keypath+"."+o),t.index=o,this.fragments[o]=this.createFragment(t);this.parentNode.insertBefore(this.docFrag,n)}this.length+=s,l=a+i,p(this.root,this,l,this.length,s)}},teardown:function(t){this.teardownFragments(t),me(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(;this.fragments.length;)this.fragments.shift().teardown(t)},render:function(t){E(this,t),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(t){var e=new v(t);return this.docFrag.appendChild(e.docFrag),e}};var p=function(t,e,n,i,r){var s,o,a,h,u,p,c;for(a=e.descriptor.i,s=n;i>s;s+=1)o=e.fragments[s],h=s-r,u=s,p=e.keypath+"."+(s-r),c=e.keypath+"."+s,o.index+=r,l(o,a,h,u,r,p,c);ke(t)},l=function(t,e,n,i,r,s,o){var a,h,u;for(t.indexRefs&&void 0!==t.indexRefs[e]&&(t.indexRefs[e].index=i),a=t.contextStack.length;a--;)u=t.contextStack[a],u.substr(0,s.length)===s&&(t.contextStack[a]=u.replace(s,o));for(a=t.items.length;a--;)switch(h=t.items[a],h.type){case H:c(h,e,n,i,r,s,o);break;case Y:l(h.fragment,e,n,i,r,s,o);break;case $:case z:case D:f(h,e,n,i,r,s,o)}},c=function(t,e,n,i,r,s,o){var a,h;for(a=t.attributes.length;a--;)h=t.attributes[a],h.fragment&&(l(h.fragment,e,n,i,r,s,o),h.twoway&&h.updateBindings());t.fragment&&l(t.fragment,e,n,i,r,s,o)},f=function(t,e,n,i,r,s,o){var a;if(t.descriptor.x?(we(t),new Oe(t)):t.keypath?t.keypath.substr(0,s.length)===s&&(we(t),t.keypath=t.keypath.replace(s,o),ye(t)):t.refIndex&&(t.refIndex=i,t.render(i)),t.fragments)for(a=t.fragments.length;a--;)l(t.fragments[a],e,n,i,r,s,o)}}(),function(){var t,e,n,i;r=function r(t){N(this,t)},r.prototype={createItem:function(r){if("string"==typeof r.descriptor)return new t(r.descriptor);switch(r.descriptor.t){case z:return new e(r);case D:return new n(r);case $:return new i(r);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===z&&(t=this.items[0].value,void 0!==t)?t:""+this},toString:function(){return this.items.join("")}},t=function(t){this.type=U,this.text=t},t.prototype={toString:function(){return this.text},teardown:function(){}},e=function(t){this.type=z,b(this,t)},e.prototype={update:k,resolve:_,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){me(this)},toString:function(){return void 0===this.value?"":this.value}},n=e,i=function(t){this.type=$,this.fragments=[],this.length=0,b(this,t)},i.prototype={update:k,resolve:_,teardown:function(){this.teardownFragments(),me(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){E(this,t),this.parentFragment.bubble()},createFragment:function(t){return new r(t)},toString:function(){return this.fragments.join("")}}}();var Ae=function(t){var e;return e={active:0,i:0,push:function(){e.active+=1,e.i+=1},pop:function(){e.active-=1,t&&!e.active&&e.ready&&t()}}};a=function(t){var e,n,i,r,s;if(I[t])return I[t].concat();for(i=[],r=t,n=0;r.length;){if(e=r.indexOf(".",n),-1===e)s=r,r="";else{if("\\"===r.charAt(e-1)&&"\\"!==r.charAt(e-2)){n=e+1;continue}s=r.substr(0,e),n=0}/\[/.test(s)?i=i.concat(s.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):i[i.length]=s,r=r.substring(e+1)}return I[t]=i,i.concat()},h=Object.prototype.toString,u=function(t){return"[object Array]"===h.call(t)},c=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},l=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},p=function(t){return"[object Object]"===h.call(t)&&"function"!=typeof t},f=function(t){var e;if("undefined"!=typeof window){if(!t)throw Error("No container element specified");if(t.tagName)return t;if("string"==typeof t&&(e=R.getElementById(t),!e&&R.querySelector&&(e=R.querySelector(t)),e.tagName))return e;if(t[0]&&t[0].tagName)return t[0];throw Error("Could not find container element")}},A=function(t){var e,n,i,r;for(e=0;t.length>e;e+=1)n=t[e],i=t[e-1],r=t[e+1],(n.mustacheType===G||n.mustacheType===X)&&(t.splice(e,1),i&&r&&i.type===U&&r.type===U&&(i.value+=r.value,t.splice(e,1)),e-=1);return t},L=function(t){var e,n,i;for(i="";t.length;){if(e=t.indexOf("<!--"),n=t.indexOf("-->"),-1===e&&-1===n){i+=t;break}if(-1!==e&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===e||e>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";i+=t.substr(0,e),t=t.substring(n+3)}return i},S=function(t){var e,n,i,r,s,o;for(s=/^\s*\r?\n/,o=/\r?\n\s*$/,e=2;t.length>e;e+=1)n=t[e],i=t[e-1],r=t[e-2],n.type===U&&i.type===W&&r.type===U&&o.test(r.value)&&s.test(n.value)&&(i.mustacheType!==z&&i.mustacheType!==D&&(r.value=r.value.replace(o,"\n")),n.value=n.value.replace(s,""),""===n.value&&t.splice(e--,1));return t};var Le;(function(){var t,e,n,i,r,s,o,a,h,u,l,c;Le=function(t,e,n,i){var s,o;return s={pos:0,tokens:t||[],next:function(){return s.tokens[s.pos]},options:n},o=new r(s,e,i)},t=function(t,r,s){return t.next()?e(t,s)||n(t,r,s)||i(t,r,s):null},e=function(t,e){var n=t.next();return n.type===U?(t.pos+=1,new s(n,e)):null},n=function(t,e,n){var i=t.next();return i.type===W||i.type===D?i.mustacheType===$||i.mustacheType===Z?new a(i,t,e,n):new o(i,t,e):null},i=function(t,e,n){var i,r=t.next();return r.type===K?(i=new h(r,t,e,n),t.options.sanitize&&t.options.sanitize.elements&&-1!==t.options.sanitize.elements.indexOf(i.lcTag)?null:i):null},l=function(t){var e,n,i,r="";if(!t)return"";for(n=0,i=t.length;i>n;n+=1){if(e=""+t[n],e===!1)return!1;r+=e}return r},c=function(t,e){var n,i;return e||(n=l(t),n===!1)?i=t.map(function(t){return t.toJson(e)}):n},r=function(e,n,i){var r,s;for(r=this.items=[],s=t(e,n,i);null!==s;)r[r.length]=s,s=t(e,n,i)},r.prototype={toJson:function(t){var e=c(this.items,t);return e},toString:function(){var t=l(this.items);return t}},function(){var t,e,n;s=function(t,e){this.type=U,this.text=e?t.value:t.value.replace(n," ")},s.prototype={toJson:function(){return this.decoded||(this.decoded=e(this.text))},toString:function(){return this.text}},t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},e=function(e){var n;return n=e.replace(/&([a-zA-Z]+);/,function(e,n){return t[n]?String.fromCharCode(t[n]):e}),n=n.replace(/&#x([0-9]+);/,function(t,e){return String.fromCharCode(parseInt(e,16))}),n=n.replace(/&#([0-9]+);/,function(t,e){return String.fromCharCode(e)})},n=/\s+/g}(),function(){o=function(t,e,n){this.type=t.type===D?D:t.mustacheType,t.ref&&(this.ref=t.ref),t.expression&&(this.expr=new u(t.expression)),this.priority=n,e.pos+=1},o.prototype={toJson:function(){var t;return this.json?this.json:(t={t:this.type},this.ref&&(t.r=this.ref),this.expr&&(t.x=this.expr.toJson()),this.priority&&(t.p=this.priority),this.json=t,t)},toString:function(){return!1}},a=function(e,n,i,r){var s;for(this.ref=e.ref,this.indexRef=e.indexRef,this.priority=i||0,this.inverted=e.mustacheType===Z,e.expression&&(this.expr=new u(e.expression)),n.pos+=1,this.items=[],s=n.next();s;){if(s.mustacheType===J){if(s.ref===this.ref||s.expr&&this.expr){n.pos+=1;break}throw Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=t(n,this.priority+1,r),s=n.next()}},a.prototype={toJson:function(t){var e;return this.json?this.json:(e={t:$},this.ref&&(e.r=this.ref),this.indexRef&&(e.i=this.indexRef),this.inverted&&(e.n=!0),this.expr&&(e.x=this.expr.toJson()),this.items.length&&(e.f=c(this.items,t)),this.priority&&(e.p=this.priority),this.json=e,e)},toString:function(){return!1}}}(),function(){var e,n,i,r,s,o,a;h=function(n,i,h,u){var p,l,c,f,d;if(this.tag=n.name,this.lcTag=this.tag.toLowerCase(),this.priority=h=h||0,i.pos+=1,u=u||"pre"===this.lcTag,n.attrs&&(l=n.attrs.filter(o),c=n.attrs.filter(a),i.options.sanitize&&i.options.sanitize.eventAttributes&&(l=l.filter(s)),f=function(t){return{name:t.name,value:Le(t.value,h+1)}},l.length&&(this.attributes=l.map(f)),c.length&&(this.proxies=c.map(f))),n.selfClosing&&(this.selfClosing=!0),-1!==e.indexOf(this.lcTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=r[this.lcTag],this.items=[],p=i.next();p&&p.mustacheType!==J;){if(p.type===K){if(p.closing){p.name.toLowerCase()===this.lcTag&&(i.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(p.name.toLowerCase()))break}this.items[this.items.length]=t(i,this.priority+1),p=i.next()}u||(d=this.items[0],d&&d.type===U&&(d.text=d.text.replace(V,""),d.text||this.items.shift()),d=this.items[this.items.length-1],d&&d.type===U&&(d.text=d.text.replace(q,""),d.text||this.items.pop()))}},h.prototype={toJson:function(t){var e,n,i,r,s;if(e={t:H,e:this.tag},this.attributes&&this.attributes.length)for(e.a={},s=this.attributes.length,r=0;s>r;r+=1)n=this.attributes[r].name,void 0===this.attributes[r].value&&(i=null),i=c(this.attributes[r].value.items,t),e.a[n]=i;if(this.items&&this.items.length&&(e.f=c(this.items,t)),this.proxies&&this.proxies.length)for(e.v={},s=this.proxies.length,r=0;s>r;r+=1)n=this.proxies[r].name,i=c(this.proxies[r].value.items,t),e.v[n]=i;return this.json=e,e},toString:function(){var t,i,r,s,o,a,h,u;if(void 0!==this.str)return this.str;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(h=l(this.items),h===!1)return this.str=!1;if(this.proxies)return this.str=!1;if(u=-1!==e.indexOf(this.tag.toLowerCase()),t="<"+this.tag,this.attributes)for(i=0,r=this.attributes.length;r>i;i+=1){if(o=this.attributes[i].name.toLowerCase(),-1!==o.indexOf(":"))return this.str=!1;if("id"===o||"intro"===o||"outro"===o)return this.str=!1;if(s=" "+this.attributes[i].name,void 0!==this.attributes[i].value){if(a=""+this.attributes[i].value,a===!1)return this.str=!1;""!==a&&(s+="=",s+=/[\s"'=<>`]/.test(a)?'"'+a.replace(/"/g,"&quot;")+'"':a)}t+=s}return this.selfClosing&&!u?(t+="/>",this.str=t):(t+=">",u?this.str=t:(t+=h,t+="</"+this.tag+">",this.str=t))}},e="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),i="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),r={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},s=function(t){return"on"!==t.name.substr(0,2)},o=function(t){return"proxy-"!==t.name.substr(0,6)},a=function(t){return"proxy-"===t.name.substr(0,6)?(t.name=t.name.substring(6),!0):!1}}(),function(){var t,e;u=function(n){this.refs=[],t(n,this.refs),this.str=e(n,this.refs)},u.prototype={toJson:function(){return{r:this.refs,s:this.str}}},t=function(e,n){var i;if(e.t===se&&-1===n.indexOf(e.n)&&n.unshift(e.n),e.o)if(p(e.o))t(e.o,n);else for(i=e.o.length;i--;)t(e.o[i],n);e.x&&t(e.x,n),e.r&&t(e.r,n)},e=function(t,n){var i=function(t){return e(t,n)};switch(t.t){case ie:case re:case Q:return t.v;case te:return"'"+t.v.replace(/'/g,"\\'")+"'";case ee:return"["+t.m.map(i).join(",")+"]";case he:return("typeof"===t.s?"typeof ":t.s)+e(t.o,n);case le:return e(t.o[0],n)+t.s+e(t.o[1],n);case ce:return e(t.x,n)+"("+(t.o?t.o.map(i).join(","):"")+")";case ue:return"("+e(t.x,n)+")";case ae:return e(t.x,n)+e(t.r,n);case oe:return t.n?"."+t.n:"["+e(t.x,n)+"]";case pe:return e(t.o[0],n)+"?"+e(t.o[1],n)+":"+e(t.o[2],n);case se:return"❖"+n.indexOf(t.n);default:throw Error("Could not stringify expression token. This error is unexpected")}}}()})();var Se;(function(){var t,e,n,i,r,s,o,a,h,u,p,l,c,f,d,g,m,v,y,w,x,b,k;Se=function(t){var e=i(t)||r(t)||s(t)||o(t);return e},k=function(t,e){var n=t.remaining().substr(0,40);throw 40===n.length&&(n+="..."),Error('Tokenizer failed: unexpected string "'+n+'" (expected '+e+")")},t=function(t,e){var n;return n=t.str.substr(t.pos,e.length),n===e?(t.pos+=e.length,e):null},e=function(t){return function(e){var n=t.exec(e.str.substring(e.pos));return n?(e.pos+=n[0].length,n[1]||n[0]):null}},n=function(t){var e=V.exec(t.str.substring(t.pos));return e?(t.pos+=e[0].length,e[0]):null},h=e(/^[^\s=]+/),u=function(e){var i,r,s;return t(e,"=")?(i=e.pos,n(e),(r=h(e))?(n(e),(s=h(e))?(n(e),t(e,"=")?[r,s]:(e.pos=i,null)):(e.pos=i,null)):(e.pos=i,null)):null},p=e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),l=function(e){var n,i,r,s,o;if(n=e.pos,s=t(e,".")||"",o=p(e)||"",s&&!o)return s;if(i=s+o,!i)return null;for(r=c(e);null!==r;)i+=r,r=c(e);return i},c=function(t){return f(t)||d(t)},f=e(/^\.[a-zA-Z_$][a-zA-Z_$0-9]*/),d=function(t){var e=g(t);return e?"."+e:null},g=e(/^\[(0|[1-9][0-9]*)\]/),m=function(t){var e,n,i,r,s;if(e=t.pos,n="",i=x(t),i&&(n+=i),r=v(t),r&&(n+=r),n)for(s=m(t);s;)n+=s,s=m(t);return n},v=e(/^[^\\']+/),y=function(t){var e,n,i,r,s;if(e=t.pos,n="",i=x(t),i&&(n+=i),r=w(t),r&&(n+=r),!n)return"";for(s=y(t);""!==s;)n+=s;return n},w=e(/^[^\\"]+/),x=function(t){var e,n="";for(e=b(t);e;)n+=e,e=b(t);return n||null},b=function(e){var n;return t(e,"\\")?(n=e.str.charAt(e.pos),e.pos+=1,n):null},function(){var r,s,o,h;i=function(e){var i,s=e.pos;return t(e,e.delimiters[0])?(i=u(e))?t(e,e.delimiters[1])?(e.delimiters=i,{type:W,mustacheType:X}):(e.pos=s,null):(i=r(e),null===i?(e.pos=s,null):(n(e),t(e,e.delimiters[1])||k(e,'"'+e.delimiters[1]+'"'),i)):null},r=function(e){var i,r,h,u,p,c,f;if(i=e.pos,r={type:W},h=s(e),r.mustacheType=h||z,h===G&&(c=e.remaining(),f=c.indexOf(e.delimiters[1]),-1!==f))return e.pos+=f,r;if(n(e),t(e,"("))n(e),u=a(e),n(e),t(e,")")||k(e,'")"'),r.expression=u;else if(r.ref=l(e),!r.ref)return e.pos=i,null;return p=o(e),null!==p&&(r.indexRef=p),r},h={"#":$,"^":Z,"/":J,">":Y,"!":G,"&":z},s=function(t){var e=h[t.str.charAt(t.pos)];return e?(t.pos+=1,e):null},o=e(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){r=function(e){var i,r=e.pos;return t(e,e.tripleDelimiters[0])?(i=u(e))?t(e,e.delimiters[1])?(e.tripleDelimiters=i,{type:X}):(e.pos=r,null):(n(e),i=l(e),null===i?(e.pos=r,null):(n(e),t(e,e.tripleDelimiters[1])?{type:D,ref:i}:(e.pos=r,null))):null}}(),function(){var r,o,a,h,u,p,l,c,f,d,g,v,w,x;s=function(t){return r(t)||o(t)},r=function(e){var n,i,r;return n=e.pos,t(e,"<")?(i={type:K},i.name=a(e),i.name?(r=h(e),r&&(i.attrs=r),t(e,"/")&&(i.selfClosing=!0),t(e,">")?i:(e.pos=n,null)):(e.pos=n,null)):null},o=function(e){var n,i;if(n=e.pos,!t(e,"<"))return null;if(i={type:K,closing:!0},!t(e,"/"))throw Error("Unexpected character "+e.remaining().charAt(0)+' (expected "/")');if(i.name=a(e),!i.name)throw Error("Unexpected character "+e.remaining().charAt(0)+" (expected tag name)");if(!t(e,">"))throw Error("Unexpected character "+e.remaining().charAt(0)+' (expected ">")');return i},a=e(/^[a-zA-Z][a-zA-Z0-9]*/),h=function(t){var e,i,r;if(e=t.pos,n(t),r=u(t),!r)return t.pos=e,null;for(i=[];null!==r;)i[i.length]=r,n(t),r=u(t);return i},u=function(t){var e,n,i;return(n=p(t))?(e={name:n},i=l(t),i&&(e.value=i),e):null},p=e(/^[^\s"'>\/=]+/),l=function(e){var i,r;return i=e.pos,n(e),t(e,"=")?(r=g(e)||w(e)||c(e),null===r?(e.pos=i,null):r):(e.pos=i,null)},d=e(/^[^\s"'=<>`]+/),f=function(t){var e,n,i;return e=t.pos,(n=d(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:U,value:n}):null},c=function(t){var e,n;for(e=[],n=i(t)||f(t);null!==n;)e[e.length]=n,n=i(t)||f(t);return e.length?e:null},v=function(t){var e,n,i;return e=t.pos,(n=m(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:U,value:n}):null},g=function(e){var n,r,s;if(n=e.pos,!t(e,"'"))return null;for(r=[],s=i(e)||v(e);null!==s;)r[r.length]=s,s=i(e)||v(e);return t(e,"'")?r:(e.pos=n,null)},x=function(t){var e,n,i;return e=t.pos,(n=y(t))?(-1!==(i=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,i),t.pos=e+n.length),{type:U,value:n}):null},w=function(e){var n,r,s;if(n=e.pos,!t(e,'"'))return null;for(r=[],s=i(e)||x(e);null!==s;)r[r.length]=s,s=i(e)||x(e);return t(e,'"')?r:(e.pos=n,null)}}(),function(){o=function(t){var e,n;return e=t.str.length,[t.delimiters[0],t.tripleDelimiters[0],"<"].forEach(function(n){var i=t.str.indexOf(n,t.pos);-1!==i&&(e=Math.min(i,e))}),e===t.pos?null:(n=t.str.substring(t.pos,e),t.pos=e,{type:U,value:n})}}(),function(){var i,r,s,o,h,u,l,c,f,d,g,v,w,x,b,_,N,E,F,O,M,A,L,S,R,C,T;a=function(t){var e,n;return e=t.pos,n=d(t)},i=function(e){var r,s,o,h;if(r=e.pos,n(e),o=a(e),null===o)return null;if(s=[o],n(e),t(e,",")){if(h=i(e),null===h)return e.pos=r,null;s=s.concat(h)}return s},o=function(e){var i,r;return i=e.pos,t(e,"(")?(n(e),(r=a(e))?(n(e),t(e,")")?{t:ue,x:r}:(e.pos=i,null)):(e.pos=i,null)):null},h=function(t){return N(t)||b(t)||o(t)},u=function(t){var e,n,i;if(e=h(t),!e)return null;if(n=_(t),!n)return e;for(;null!==n;)i={t:ae,x:e,r:n},e=i,n=_(t);return i},l=function(e){var r,s,o,a;return(s=u(e))?(r=e.pos,t(e,"(")?(n(e),o=i(e),n(e),t(e,")")?(a={t:ce,x:s},o&&(a.o=o),a):(e.pos=r,s)):s):null},r=function(e,i){return function(r){var s,o;return t(r,e)?(s=r.pos,n(r),o=a(r),o||k(r,"an expression"),{s:e,o:o,t:he}):i(r)}},function(){var t,e,n,i,s;for(i="! ~ + - typeof".split(" "),s=l,t=0,e=i.length;e>t;t+=1)n=r(i[t],s),s=n;c=s}(),s=function(e,i){return function(r){var s,o,h;return(o=i(r))?(s=r.pos,n(r),t(r,e)?(n(r),h=a(r),h?{t:le,s:e,o:[o,h]}:(r.pos=s,o)):(r.pos=s,o)):null}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=c,t=0,e=i.length;e>t;t+=1)n=s(i[t],r),r=n;f=r}(),d=function(e){var i,r,s,o;return(r=f(e))?(i=e.pos,n(e),t(e,"?")?(n(e),(s=a(e))?(n(e),t(e,":")?(n(e),o=a(e),o?{t:pe,o:[r,s,o]}:(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):(e.pos=i,r)):null},g=e(/^[0-9]+/),v=e(/^[eE][\-+]?[0-9]+/),w=e(/^\.[0-9]+/),x=e(/^(0|[1-9][0-9]*)/),b=function(e){var n,i,r;return i=t(e,".")||"",n=p(e)||"",r=i+n,r?{t:se,n:r}:null},_=function(e){var i,r,s;if(i=e.pos,n(e),t(e,".")){if(n(e),r=p(e))return{t:oe,n:r};k("a property name")}return t(e,"[")?(n(e),s=a(e),s||k("an expression"),n(e),t(e,"]")||k('"]"'),{t:oe,x:s}):null},N=function(t){var e=O(t)||F(t)||L(t)||M(t)||A(t)||E(t);return e},E=function(e){var i,r;return i=e.pos,n(e),t(e,"[")?(r=expressionList(e),t(e,"]")?{t:ee,o:r}:(e.pos=i,null)):(e.pos=i,null)},F=function(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:ie,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:ie,v:"false"}):null},T=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,L=function(t){var e,n,i;return e=t.pos,(n=p(t))?(i=T.exec(n))?(t.pos=e+i[0].length,{t:re,v:i[0]}):(t.pos=e,null):null},O=function(t){var e,n;return e=t.pos,(n=w(t))?{t:Q,v:n}:(n=x(t),null===n?null:(n+=w(t)||"",n+=v(t)||"",{t:Q,v:n}))},A=function(e){var i,r;return i=e.pos,n(e),t(e,"{")?(r=S(e),n(e),t(e,"}")?{t:ne,m:r}:(e.pos=i,null)):(e.pos=i,null)},S=function(e){var n,i,r,s;return n=e.pos,r=R(e),null===r?null:(i=[r],t(e,",")?(s=S(e),s?i.concat(s):(e.pos=n,null)):i)},R=function(e){var i,r,s;return i=e.pos,n(e),r=C(e),null===r?(e.pos=i,null):(n(e),t(e,":")?(n(e),s=a(e),null===s?(e.pos=i,null):{t:KEY_VALUE_PAIR,k:r,v:s}):(e.pos=i,null))},C=function(t){return p(t)||M(t)||O(t)},M=function(e){var n,i;return n=e.pos,t(e,'"')?(i=y(e),t(e,'"')?{t:te,v:i}:(e.pos=n,null)):t(e,"'")?(i=m(e),t(e,"'")?{t:te,v:i}:(e.pos=n,null)):null}}()})();var Re;(function(){var t,e,n,i;t=/^\s*$/,e=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,n=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,Re=function(n,r){var s,o,a,h;return r=r||{},e.test(n)?i(n,r):(r.sanitize===!0&&(r.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),s=Ce(n,r),r.preserveWhitespace||(h=s[0],h&&h.type===U&&t.test(h.value)&&s.shift(),h=s[s.length-1],h&&h.type===U&&t.test(h.value)&&s.pop()),o=Le(s,0,r,r.preserveWhitespace),a=o.toJson(),"string"==typeof a?[a]:a)},i=function(t,i){var r,s,o,a,h,u;for(o={},r="",s=t;h=e.exec(s);){if(a=h[1],r+=s.substr(0,h.index),s=s.substring(h.index+h[0].length),u=n.exec(s),!u||u[1]!==a)throw Error("Inline partials must have a closing delimiter, and cannot be nested");o[a]=Re(s.substr(0,u.index),i),s=s.substring(u.index+u[0].length)}return{template:Re(r,i),partials:o}}})();var Ce=function(t,e){var n,i,r,s,o;for(e=e||{},n={str:L(t),pos:0,delimiters:e.delimiters||["{{","}}"],tripleDelimiters:e.tripleDelimiters||["{{{","}}}"],remaining:function(){return n.str.substring(n.pos)}},i=[];n.pos<n.str.length;){if(r=Se(n),null===r&&n.remaining())throw s=n.str.substr(0,n.pos).substr(-20),20===s.length&&(s="..."+s),o=n.remaining().substr(0,20),20===o.length&&(o+="..."),Error("Could not parse template: "+(s?s+"<- ":"")+"failed at character "+n.pos+" ->"+o);i[i.length]=r}return S(i),A(i),i};e.prototype=C,e.adaptors=T,e.eventDefinitions=P,e.partials={},e.easing=n,e.extend=i,e.interpolate=r,e.interpolators=s,e.parse=Re,e.transitions=o,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.Ractive=e})(this);